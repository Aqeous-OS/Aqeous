\hypertarget{cmos_8c}{}\section{Experimental Edition/\+Source/\+Drivers/timer/cmos.c File Reference}
\label{cmos_8c}\index{Experimental Edition/\+Source/\+Drivers/timer/cmos.\+c@{Experimental Edition/\+Source/\+Drivers/timer/cmos.\+c}}
{\ttfamily \#include $<$cmos.\+h$>$}\\*
{\ttfamily \#include $<$sys.\+h$>$}\\*
Include dependency graph for cmos.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{cmos_8c__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=190pt]{cmos_8c__dep__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{cmos_8c_aa819b5d8e57a2e0a1a2a08285209b7db}{C\+M\+O\+S\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+O\+RT}~0x70
\item 
\#define \hyperlink{cmos_8c_abaa1d2c0815d36f47eccec69775f400a}{C\+M\+O\+S\+\_\+\+D\+A\+T\+A\+\_\+\+P\+O\+RT}~0x71
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
const char $\ast$ \hyperlink{cmos_8c_a9ed8260fcfc9ecd7018157eab996fe43}{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+day} (uint8\+\_\+t day)
\item 
const char $\ast$ \hyperlink{cmos_8c_ae239ed8d52c610436e8b19786b43cd01}{\+\_\+\+\_\+cmos\+\_\+get\+\_\+day} (uint8\+\_\+t day)
\item 
const char $\ast$ \hyperlink{cmos_8c_a9b4c101f976e8f0d2c0db26f0c36484e}{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+month} (uint8\+\_\+t month)
\item 
const char $\ast$ \hyperlink{cmos_8c_a7a0ad78c36320ce6caf7f0ab7951f4b1}{\+\_\+\+\_\+cmos\+\_\+get\+\_\+month} (uint8\+\_\+t month)
\item 
uint8\+\_\+t \hyperlink{cmos_8c_a6ffad4def30d248e14194ba66dc6830b}{\+\_\+\+\_\+cmos\+\_\+do\+\_\+doomsday} (uint8\+\_\+t day, uint8\+\_\+t month, uint8\+\_\+t year)
\item 
uint8\+\_\+t \hyperlink{cmos_8c_a172e1a111093b1cb1dc32ca5e9a35eca}{decode\+\_\+bcd} (uint8\+\_\+t bcd)
\item 
void \hyperlink{cmos_8c_a30444c527dbf74f503acbd98b0dad750}{init\+\_\+cmos} ()
\item 
\hyperlink{common_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{cmos_8c_a18f8ab7489d92fe1f90a04c43d091fc6}{cmos\+\_\+24hour} ()
\item 
\hyperlink{common_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{cmos_8c_a5c9b39699de990a7941aa71a97b8f88a}{cmos\+\_\+bcd\+\_\+encoded} ()
\item 
\hyperlink{common_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{cmos_8c_a4b2eb60a4ffbeee68a9bb7918c76b94c}{cmos\+\_\+updating} ()
\item 
unsigned int \hyperlink{cmos_8c_ad86480bd4e099dc40dbbfc3ff58ede85}{Read\+From\+C\+M\+OS} ()
\item 
uint8\+\_\+t \hyperlink{cmos_8c_a7f45839bd17c5aabf56c01241c1ca12a}{cmos\+\_\+rtc\+\_\+get\+\_\+value} (enum \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929f}{cmos\+\_\+reg} r, \hyperlink{common_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} auto\+\_\+decode\+\_\+bcd)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>\hyperlink{common_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{cmos_8c_a4bfdf371dad493af5d99671b6532843d}{is\_24h}\\
\>\hyperlink{common_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{cmos_8c_aae1bfeb43b63e719c9c575b93cfd08f5}{bcd\_encoded}\\
\} \hyperlink{cmos_8c_a2b8b53ce0d496a2f3e814808f1c2656b}{cmos}\\

\end{tabbing}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{cmos.\+c@{cmos.\+c}!C\+M\+O\+S\+\_\+\+D\+A\+T\+A\+\_\+\+P\+O\+RT@{C\+M\+O\+S\+\_\+\+D\+A\+T\+A\+\_\+\+P\+O\+RT}}
\index{C\+M\+O\+S\+\_\+\+D\+A\+T\+A\+\_\+\+P\+O\+RT@{C\+M\+O\+S\+\_\+\+D\+A\+T\+A\+\_\+\+P\+O\+RT}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{C\+M\+O\+S\+\_\+\+D\+A\+T\+A\+\_\+\+P\+O\+RT}{CMOS_DATA_PORT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+M\+O\+S\+\_\+\+D\+A\+T\+A\+\_\+\+P\+O\+RT~0x71}\hypertarget{cmos_8c_abaa1d2c0815d36f47eccec69775f400a}{}\label{cmos_8c_abaa1d2c0815d36f47eccec69775f400a}


Definition at line 5 of file cmos.\+c.

\index{cmos.\+c@{cmos.\+c}!C\+M\+O\+S\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+O\+RT@{C\+M\+O\+S\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+O\+RT}}
\index{C\+M\+O\+S\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+O\+RT@{C\+M\+O\+S\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+O\+RT}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{C\+M\+O\+S\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+O\+RT}{CMOS_REGISTER_PORT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+M\+O\+S\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+O\+RT~0x70}\hypertarget{cmos_8c_aa819b5d8e57a2e0a1a2a08285209b7db}{}\label{cmos_8c_aa819b5d8e57a2e0a1a2a08285209b7db}


Definition at line 4 of file cmos.\+c.



\subsection{Function Documentation}
\index{cmos.\+c@{cmos.\+c}!\+\_\+\+\_\+cmos\+\_\+do\+\_\+doomsday@{\+\_\+\+\_\+cmos\+\_\+do\+\_\+doomsday}}
\index{\+\_\+\+\_\+cmos\+\_\+do\+\_\+doomsday@{\+\_\+\+\_\+cmos\+\_\+do\+\_\+doomsday}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+cmos\+\_\+do\+\_\+doomsday(uint8\+\_\+t day, uint8\+\_\+t month, uint8\+\_\+t year)}{__cmos_do_doomsday(uint8_t day, uint8_t month, uint8_t year)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t \+\_\+\+\_\+cmos\+\_\+do\+\_\+doomsday (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{day, }
\item[{uint8\+\_\+t}]{month, }
\item[{uint8\+\_\+t}]{year}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a6ffad4def30d248e14194ba66dc6830b}{}\label{cmos_8c_a6ffad4def30d248e14194ba66dc6830b}


Definition at line 82 of file cmos.\+c.


\begin{DoxyCode}
83 \{
84     \textcolor{keywordflow}{if} (month < 3) \{
85         month += 13;
86         --year;
87     \}
88     uint16\_t dow = day + (13 * month - 27)/5
89                        + year
90                        + year/4
91                        - year/100
92                        + year/400;
93     \textcolor{keywordflow}{return} ((uint8\_t)(dow % 7) + 1);
94 \};
\end{DoxyCode}
\index{cmos.\+c@{cmos.\+c}!\+\_\+\+\_\+cmos\+\_\+get\+\_\+day@{\+\_\+\+\_\+cmos\+\_\+get\+\_\+day}}
\index{\+\_\+\+\_\+cmos\+\_\+get\+\_\+day@{\+\_\+\+\_\+cmos\+\_\+get\+\_\+day}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+cmos\+\_\+get\+\_\+day(uint8\+\_\+t day)}{__cmos_get_day(uint8_t day)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ \+\_\+\+\_\+cmos\+\_\+get\+\_\+day (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{day}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_ae239ed8d52c610436e8b19786b43cd01}{}\label{cmos_8c_ae239ed8d52c610436e8b19786b43cd01}


Definition at line 25 of file cmos.\+c.


\begin{DoxyCode}
26 \{
27     \textcolor{keywordflow}{switch} (day) \{
28         \textcolor{keywordflow}{case} 7: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Saturday"};
29         \textcolor{keywordflow}{case} 6: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Friday"};
30         \textcolor{keywordflow}{case} 5: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Thursday"};
31         \textcolor{keywordflow}{case} 4: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Wednesday"};
32         \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Tuesday"};
33         \textcolor{keywordflow}{case} 2: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Monday"};
34         \textcolor{keywordflow}{default}:
35         \textcolor{keywordflow}{case} 1: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Sunday"};
36     \}
37 \};
\end{DoxyCode}
\index{cmos.\+c@{cmos.\+c}!\+\_\+\+\_\+cmos\+\_\+get\+\_\+month@{\+\_\+\+\_\+cmos\+\_\+get\+\_\+month}}
\index{\+\_\+\+\_\+cmos\+\_\+get\+\_\+month@{\+\_\+\+\_\+cmos\+\_\+get\+\_\+month}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+cmos\+\_\+get\+\_\+month(uint8\+\_\+t month)}{__cmos_get_month(uint8_t month)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ \+\_\+\+\_\+cmos\+\_\+get\+\_\+month (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{month}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a7a0ad78c36320ce6caf7f0ab7951f4b1}{}\label{cmos_8c_a7a0ad78c36320ce6caf7f0ab7951f4b1}


Definition at line 58 of file cmos.\+c.


\begin{DoxyCode}
59 \{
60     \textcolor{keywordflow}{switch} (month) \{
61         \textcolor{keywordflow}{case} 12: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"December"};
62         \textcolor{keywordflow}{case} 11: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"November"};
63         \textcolor{keywordflow}{case} 10: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"October"};
64         \textcolor{keywordflow}{case} 9: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"September"};
65         \textcolor{keywordflow}{case} 8: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"August"};
66         \textcolor{keywordflow}{case} 7: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"July"};
67         \textcolor{keywordflow}{case} 6: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"June"};
68         \textcolor{keywordflow}{case} 5: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"May"};
69         \textcolor{keywordflow}{case} 4: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"April"};
70         \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"March"};
71         \textcolor{keywordflow}{case} 2: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"February"};
72         \textcolor{keywordflow}{default}:
73         \textcolor{keywordflow}{case} 1: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"January"};
74     \}
75 \};
\end{DoxyCode}
\index{cmos.\+c@{cmos.\+c}!\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+day@{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+day}}
\index{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+day@{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+day}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+day(uint8\+\_\+t day)}{__cmos_get_short_day(uint8_t day)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ \+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+day (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{day}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a9ed8260fcfc9ecd7018157eab996fe43}{}\label{cmos_8c_a9ed8260fcfc9ecd7018157eab996fe43}


Definition at line 11 of file cmos.\+c.


\begin{DoxyCode}
12 \{
13     \textcolor{keywordflow}{switch} (day) \{
14         \textcolor{keywordflow}{case} 7: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Sat"};
15         \textcolor{keywordflow}{case} 6: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Fri"};
16         \textcolor{keywordflow}{case} 5: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Thu"};
17         \textcolor{keywordflow}{case} 4: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Wed"};
18         \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Tue"};
19         \textcolor{keywordflow}{case} 2: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Mon"};
20         \textcolor{keywordflow}{default}:
21         \textcolor{keywordflow}{case} 1: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Sun"};
22     \}
23 \};
\end{DoxyCode}
\index{cmos.\+c@{cmos.\+c}!\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+month@{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+month}}
\index{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+month@{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+month}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+month(uint8\+\_\+t month)}{__cmos_get_short_month(uint8_t month)}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ \+\_\+\+\_\+cmos\+\_\+get\+\_\+short\+\_\+month (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{month}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a9b4c101f976e8f0d2c0db26f0c36484e}{}\label{cmos_8c_a9b4c101f976e8f0d2c0db26f0c36484e}


Definition at line 39 of file cmos.\+c.


\begin{DoxyCode}
40 \{
41     \textcolor{keywordflow}{switch} (month) \{
42         \textcolor{keywordflow}{case} 12: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Dec"};
43         \textcolor{keywordflow}{case} 11: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Nov"};
44         \textcolor{keywordflow}{case} 10: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Oct"};
45         \textcolor{keywordflow}{case} 9: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Sep"};
46         \textcolor{keywordflow}{case} 8: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Aug"};
47         \textcolor{keywordflow}{case} 7: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Jul"};
48         \textcolor{keywordflow}{case} 6: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Jun"};
49         \textcolor{keywordflow}{case} 5: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"May"};
50         \textcolor{keywordflow}{case} 4: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Apr"};
51         \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Mar"};
52         \textcolor{keywordflow}{case} 2: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Feb"};
53         \textcolor{keywordflow}{default}:
54         \textcolor{keywordflow}{case} 1: \textcolor{keywordflow}{return} \textcolor{stringliteral}{"Jan"};
55     \}
56 \};
\end{DoxyCode}
\index{cmos.\+c@{cmos.\+c}!cmos\+\_\+24hour@{cmos\+\_\+24hour}}
\index{cmos\+\_\+24hour@{cmos\+\_\+24hour}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{cmos\+\_\+24hour()}{cmos_24hour()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} cmos\+\_\+24hour (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a18f8ab7489d92fe1f90a04c43d091fc6}{}\label{cmos_8c_a18f8ab7489d92fe1f90a04c43d091fc6}
Test to see if C\+M\+OS is configured to be 24hour. 

Definition at line 124 of file cmos.\+c.


\begin{DoxyCode}
125 \{
126     \textcolor{keywordflow}{return} \hyperlink{cmos_8c_a2b8b53ce0d496a2f3e814808f1c2656b}{cmos}.is\_24h;
127 \};
\end{DoxyCode}
\index{cmos.\+c@{cmos.\+c}!cmos\+\_\+bcd\+\_\+encoded@{cmos\+\_\+bcd\+\_\+encoded}}
\index{cmos\+\_\+bcd\+\_\+encoded@{cmos\+\_\+bcd\+\_\+encoded}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{cmos\+\_\+bcd\+\_\+encoded()}{cmos_bcd_encoded()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} cmos\+\_\+bcd\+\_\+encoded (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a5c9b39699de990a7941aa71a97b8f88a}{}\label{cmos_8c_a5c9b39699de990a7941aa71a97b8f88a}
Test to see if C\+M\+OS is bcd encoded. 

Definition at line 129 of file cmos.\+c.


\begin{DoxyCode}
130 \{
131     \textcolor{keywordflow}{return} \hyperlink{cmos_8c_a2b8b53ce0d496a2f3e814808f1c2656b}{cmos}.bcd\_encoded;
132 \};
\end{DoxyCode}
\index{cmos.\+c@{cmos.\+c}!cmos\+\_\+rtc\+\_\+get\+\_\+value@{cmos\+\_\+rtc\+\_\+get\+\_\+value}}
\index{cmos\+\_\+rtc\+\_\+get\+\_\+value@{cmos\+\_\+rtc\+\_\+get\+\_\+value}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{cmos\+\_\+rtc\+\_\+get\+\_\+value(enum cmos\+\_\+reg r, bool auto\+\_\+decode\+\_\+bcd)}{cmos_rtc_get_value(enum cmos_reg r, bool auto_decode_bcd)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t cmos\+\_\+rtc\+\_\+get\+\_\+value (
\begin{DoxyParamCaption}
\item[{enum {\bf cmos\+\_\+reg}}]{r, }
\item[{{\bf bool}}]{auto\+\_\+decode\+\_\+bcd}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a7f45839bd17c5aabf56c01241c1ca12a}{}\label{cmos_8c_a7f45839bd17c5aabf56c01241c1ca12a}
Retrieve the a value from C\+M\+OS for the specified register. This also allows for specifying whether the C\+M\+OS value should be automatically decoded from B\+CD, if it is in bcd. 

Definition at line 149 of file cmos.\+c.


\begin{DoxyCode}
150 \{
151     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"cli"});
152     \hyperlink{sys_8h_a1fe613f83e149aa1a4ae0d5f5149ab34}{outb}(\hyperlink{cmos_8c_aa819b5d8e57a2e0a1a2a08285209b7db}{CMOS\_REGISTER\_PORT}, r);
153     uint8\_t ret\_val = \hyperlink{sys_8h_a3d758e66f0e4acaf38ba39b58ce83e4d}{inb}(\hyperlink{cmos_8c_abaa1d2c0815d36f47eccec69775f400a}{CMOS\_DATA\_PORT});
154     \textcolor{keyword}{asm} \textcolor{keyword}{volatile}(\textcolor{stringliteral}{"sti"});
155 
156     \textcolor{comment}{/* we should only decode the value if it is in BCD and we've specified */}
157     \textcolor{comment}{/* automatic decoding */}
158     \textcolor{keywordflow}{if} (\hyperlink{cmos_8c_a5c9b39699de990a7941aa71a97b8f88a}{cmos\_bcd\_encoded}() && auto\_decode\_bcd) \{
159         \textcolor{keywordflow}{switch} (r) \{
160             \textcolor{keywordflow}{case} \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929fac7ffa39bae4c6d58fa48b24988896a84}{cmos\_rtc\_reg\_seconds}:
161             \textcolor{keywordflow}{case} \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929faf67e962b07b95efb6a555ea054c128a8}{cmos\_rtc\_reg\_minutes}:
162             \textcolor{keywordflow}{case} \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929fa82225f60aec3cb8f81b271d64f868a10}{cmos\_rtc\_reg\_hours}:
163             \textcolor{keywordflow}{case} \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929faa9f8e2a5da3b0d88d86a472c1a730a25}{cmos\_rtc\_reg\_weekday}:
164             \textcolor{keywordflow}{case} \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929fa62abccfb1732f47529f154725fea9b71}{cmos\_rtc\_reg\_day}:
165             \textcolor{keywordflow}{case} \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929fa4b07a58cb3bbed60cd6fea9edc770a44}{cmos\_rtc\_reg\_month}:
166             \textcolor{keywordflow}{case} \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929fa07a1b3be6838f0770bb5371ff4bb722d}{cmos\_rtc\_reg\_year}:
167             \textcolor{keywordflow}{case} \hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929fa54f489ded1c92f7ccb257e6d590aa3df}{cmos\_rtc\_reg\_century}:
168                 ret\_val = \hyperlink{cmos_8c_a172e1a111093b1cb1dc32ca5e9a35eca}{decode\_bcd}(ret\_val);
169                 \textcolor{keywordflow}{break};
170             \textcolor{keywordflow}{default}:
171                 \textcolor{keywordflow}{break};
172         \}
173     \}
174 
175     \textcolor{keywordflow}{return} ret\_val;
176 \};
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=324pt]{cmos_8c_a7f45839bd17c5aabf56c01241c1ca12a_cgraph}
\end{center}
\end{figure}


\index{cmos.\+c@{cmos.\+c}!cmos\+\_\+updating@{cmos\+\_\+updating}}
\index{cmos\+\_\+updating@{cmos\+\_\+updating}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{cmos\+\_\+updating()}{cmos_updating()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} cmos\+\_\+updating (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a4b2eb60a4ffbeee68a9bb7918c76b94c}{}\label{cmos_8c_a4b2eb60a4ffbeee68a9bb7918c76b94c}
Checks to see if C\+M\+OS is in the process of being updated. It is important that accessing of C\+M\+OS R\+TC values is not performed if this is happening. 

Definition at line 134 of file cmos.\+c.


\begin{DoxyCode}
135 \{
136     uint8\_t v = \hyperlink{cmos_8c_a7f45839bd17c5aabf56c01241c1ca12a}{cmos\_rtc\_get\_value}(\hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929fa1ba4062e2bf84386e016961f88928d0a}{cmos\_rtc\_reg\_status\_a}, \textcolor{keyword}{false});
137     \textcolor{keywordflow}{return} v & 0x80;
138 \};
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{cmos_8c_a4b2eb60a4ffbeee68a9bb7918c76b94c_cgraph}
\end{center}
\end{figure}


\index{cmos.\+c@{cmos.\+c}!decode\+\_\+bcd@{decode\+\_\+bcd}}
\index{decode\+\_\+bcd@{decode\+\_\+bcd}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{decode\+\_\+bcd(uint8\+\_\+t bcd)}{decode_bcd(uint8_t bcd)}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t decode\+\_\+bcd (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{bcd}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a172e1a111093b1cb1dc32ca5e9a35eca}{}\label{cmos_8c_a172e1a111093b1cb1dc32ca5e9a35eca}


Definition at line 101 of file cmos.\+c.


\begin{DoxyCode}
102 \{
103     \textcolor{keywordflow}{return} ((bcd & 0xF0) >> 1) + ((bcd & 0xF0) >> 3) + (bcd & 0x0F);
104 \};
\end{DoxyCode}
\index{cmos.\+c@{cmos.\+c}!init\+\_\+cmos@{init\+\_\+cmos}}
\index{init\+\_\+cmos@{init\+\_\+cmos}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{init\+\_\+cmos()}{init_cmos()}}]{\setlength{\rightskip}{0pt plus 5cm}void init\+\_\+cmos (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{cmos_8c_a30444c527dbf74f503acbd98b0dad750}{}\label{cmos_8c_a30444c527dbf74f503acbd98b0dad750}
Initialise the driver for C\+M\+OS access. 

Definition at line 117 of file cmos.\+c.


\begin{DoxyCode}
118 \{
119     uint8\_t v = \hyperlink{cmos_8c_a7f45839bd17c5aabf56c01241c1ca12a}{cmos\_rtc\_get\_value}(\hyperlink{cmos_8h_ae4f04e3c25c63448f33ec7a51d04929fa9197ce6f9548d3d673f19fa88a153ca8}{cmos\_rtc\_reg\_status\_b}, \textcolor{keyword}{false});
120     \hyperlink{cmos_8c_a2b8b53ce0d496a2f3e814808f1c2656b}{cmos}.is\_24h = v & (1 << 1);
121     \hyperlink{cmos_8c_a2b8b53ce0d496a2f3e814808f1c2656b}{cmos}.bcd\_encoded = (v & (1 << 2)) ? \textcolor{keyword}{false} : \textcolor{keyword}{true};
122 \};
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{cmos_8c_a30444c527dbf74f503acbd98b0dad750_cgraph}
\end{center}
\end{figure}


\index{cmos.\+c@{cmos.\+c}!Read\+From\+C\+M\+OS@{Read\+From\+C\+M\+OS}}
\index{Read\+From\+C\+M\+OS@{Read\+From\+C\+M\+OS}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{Read\+From\+C\+M\+O\+S()}{ReadFromCMOS()}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int Read\+From\+C\+M\+OS (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{cmos_8c_ad86480bd4e099dc40dbbfc3ff58ede85}{}\label{cmos_8c_ad86480bd4e099dc40dbbfc3ff58ede85}


Definition at line 140 of file cmos.\+c.


\begin{DoxyCode}
141 \{
142     \hyperlink{sys_8h_a1fe613f83e149aa1a4ae0d5f5149ab34}{outb}(0x70,0x00);
143     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{rand_8h_ae73654f333e4363463ad8c594eca1905}{time}=\hyperlink{sys_8h_a3d758e66f0e4acaf38ba39b58ce83e4d}{inb}(0x71);
144     \textcolor{keywordflow}{return} \hyperlink{rand_8h_ae73654f333e4363463ad8c594eca1905}{time};
145 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=243pt]{cmos_8c_ad86480bd4e099dc40dbbfc3ff58ede85_cgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\index{cmos.\+c@{cmos.\+c}!bcd\+\_\+encoded@{bcd\+\_\+encoded}}
\index{bcd\+\_\+encoded@{bcd\+\_\+encoded}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{bcd\+\_\+encoded}{bcd_encoded}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} bcd\+\_\+encoded}\hypertarget{cmos_8c_aae1bfeb43b63e719c9c575b93cfd08f5}{}\label{cmos_8c_aae1bfeb43b63e719c9c575b93cfd08f5}


Definition at line 114 of file cmos.\+c.

\index{cmos.\+c@{cmos.\+c}!cmos@{cmos}}
\index{cmos@{cmos}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{cmos}{cmos}}]{\setlength{\rightskip}{0pt plus 5cm}struct \{ ... \}   cmos}\hypertarget{cmos_8c_a2b8b53ce0d496a2f3e814808f1c2656b}{}\label{cmos_8c_a2b8b53ce0d496a2f3e814808f1c2656b}
\index{cmos.\+c@{cmos.\+c}!is\+\_\+24h@{is\+\_\+24h}}
\index{is\+\_\+24h@{is\+\_\+24h}!cmos.\+c@{cmos.\+c}}
\subsubsection[{\texorpdfstring{is\+\_\+24h}{is_24h}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} is\+\_\+24h}\hypertarget{cmos_8c_a4bfdf371dad493af5d99671b6532843d}{}\label{cmos_8c_a4bfdf371dad493af5d99671b6532843d}


Definition at line 113 of file cmos.\+c.

