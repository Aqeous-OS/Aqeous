\hypertarget{ahci_8c}{}\section{Experimental Edition/\+Source/\+Drivers/\+A\+H\+C\+I/ahci.c File Reference}
\label{ahci_8c}\index{Experimental Edition/\+Source/\+Drivers/\+A\+H\+C\+I/ahci.\+c@{Experimental Edition/\+Source/\+Drivers/\+A\+H\+C\+I/ahci.\+c}}
{\ttfamily \#include $<$ahci.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$sys.\+h$>$}\\*
{\ttfamily \#include $<$mem.\+h$>$}\\*
{\ttfamily \#include $<$ata.\+h$>$}\\*
Include dependency graph for ahci.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=193pt]{ahci_8c__dep__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{ahci_8c_af5b266248c10a117b09b0a74bbb095b9}{P\+C\+I\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+C\+AP}~0x34
\item 
\#define \hyperlink{ahci_8c_aa2525d6c1f29e404bd2fcb0318c30167}{P\+C\+I\+\_\+\+C\+A\+P\+\_\+\+I\+D\+\_\+\+S\+A\+T\+A\+CR}~0x12
\item 
\#define \hyperlink{ahci_8c_a6e1750022d3d187235f771ea998bd37a}{V\+B\+O\+X\+\_\+\+A\+H\+C\+I\+\_\+\+N\+O\+\_\+\+D\+E\+V\+I\+CE}~0xffff
\item 
\#define \hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(bit)~((uint32\+\_\+t)(1\+L $<$$<$ (bit)))
\item 
\#define \hyperlink{ahci_8c_a2d86364383a86690559c549be1306752}{A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE}~0x100
\item 
\#define \hyperlink{ahci_8c_af5cda4f8d40a08d516e44dc24e060fa2}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+C\+AP}~((uint32\+\_\+t)0x00)
\item 
\#define \hyperlink{ahci_8c_a93e01cdf25a2066c34df2af9e493e6be}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+G\+HC}~((uint32\+\_\+t)0x04)
\item 
\#define \hyperlink{ahci_8c_a9f339cfee9eaea8761f985fa54772353}{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+AE}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(31)
\item 
\#define \hyperlink{ahci_8c_acc04c3cd55f57936ee1069358f68da8f}{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+IR}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(1)
\item 
\#define \hyperlink{ahci_8c_a75fe6278df56ae5699cc170b5be33352}{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+HR}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(0)
\item 
\#define \hyperlink{ahci_8c_a50140ab57bd0d4ad2a6b43a0d10ff5ed}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+IS}~((uint32\+\_\+t)0x08)
\item 
\#define \hyperlink{ahci_8c_a3bc3339722bfafbe1f0c0bebcf6cf63e}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+PI}~((uint32\+\_\+t)0x0c)
\item 
\#define \hyperlink{ahci_8c_a0a1d16904410efd99c1da8891f20795f}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+VS}~((uint32\+\_\+t)0x10)
\item 
\#define \hyperlink{ahci_8c_a73819b27719a9a908b43135c20936c87}{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE}~0x80
\item 
\#define \hyperlink{ahci_8c_ab2c8f6d71cb2d1ab4217fb3cc41cc986}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+LB}~0x00
\item 
\#define \hyperlink{ahci_8c_a049877c5f9362727f4f874f0468cc32f}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+L\+BU}~0x04
\item 
\#define \hyperlink{ahci_8c_a3499f4ef66c7d3b0839d00708dededa4}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+FB}~0x08
\item 
\#define \hyperlink{ahci_8c_ae368016cdb4ce545b9caa5147accd1ad}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+F\+BU}~0x0c
\item 
\#define \hyperlink{ahci_8c_ad2b0a1ad58fdb414e4d5f12bcb96b79b}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IS}~0x10
\item 
\#define \hyperlink{ahci_8c_a563e608bf610a18ec707ece04f9df9e4}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+D\+H\+RS}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(0)
\item 
\#define \hyperlink{ahci_8c_a5361f917029d5335a38f5ad55faa00e0}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+T\+F\+ES}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(30)
\item 
\#define \hyperlink{ahci_8c_a4ba72a3e49848654e20f3430e3c98e4d}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IE}~0x14
\item 
\#define \hyperlink{ahci_8c_a9f8ece24491bcc7bed5204263aa744e5}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+MD}~0x18
\item 
\#define \hyperlink{ahci_8c_a9d73c037c3dfa1654521b70d0f7154b0}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+ST}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(0)
\item 
\#define \hyperlink{ahci_8c_a3cec153d4d3567550e532d1689d1a04d}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+F\+RE}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(4)
\item 
\#define \hyperlink{ahci_8c_a63af49164314594bf8f790dc8cef7b7d}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+FR}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(14)
\item 
\#define \hyperlink{ahci_8c_a464049a346732cb6e22a13ba1ceee274}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+CR}~\hyperlink{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{R\+T\+\_\+\+B\+I\+T\+\_\+32}(15)
\item 
\#define \hyperlink{ahci_8c_ad1e39419a1fa767210df35ee6f7b9f21}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+T\+FD}~0x20
\item 
\#define \hyperlink{ahci_8c_a4b5bb58aea38b0a92340d9cc6a0851f5}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+IG}~0x24
\item 
\#define \hyperlink{ahci_8c_ae0bccb16cba96926e5f5b6527f38e699}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+S\+TS}~0x28
\item 
\#define \hyperlink{ahci_8c_af7baa19a47f2d2c99b74363b77c5414c}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+C\+TL}~0x2c
\item 
\#define \hyperlink{ahci_8c_a3a67c6346d2ebb7202421894feab6110}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+E\+RR}~0x30
\item 
\#define \hyperlink{ahci_8c_a686a69fc0de25f62b887262e05571621}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+A\+CT}~0x34
\item 
\#define \hyperlink{ahci_8c_a18e97430456e2738e1705c90c70bb11f}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+CI}~0x38
\item 
\#define \hyperlink{ahci_8c_aa3bf2d4de92b360834630e5f9b7a6a9a}{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG}(port,  reg)~(\hyperlink{ahci_8c_a2d86364383a86690559c549be1306752}{A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE} + (port) $\ast$ \hyperlink{ahci_8c_a73819b27719a9a908b43135c20936c87}{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE} + (reg))
\item 
\#define \hyperlink{ahci_8c_ad66339e6ba6e4b74116fa076724d6928}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+I\+DX}~0
\item 
\#define \hyperlink{ahci_8c_a277abb80722f7d8ccf23f616891902df}{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+D\+A\+TA}~4
\item 
\#define \hyperlink{ahci_8c_a0b784b3fa190eb10a274fc3c1f03731b}{A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}(iobase,  reg,  val)
\item 
\#define \hyperlink{ahci_8c_a61a849a3b7f0d85e15409186b27cf615}{A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}(iobase,  reg,  val)
\item 
\#define \hyperlink{ahci_8c_aeed5054ede5a2a3e1261c3a7579a9228}{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}(iobase,  port,  reg,  val)~\hyperlink{ahci_8c_a0b784b3fa190eb10a274fc3c1f03731b}{A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}((iobase), \hyperlink{ahci_8c_aa3bf2d4de92b360834630e5f9b7a6a9a}{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG}((port), (reg)), val)
\item 
\#define \hyperlink{ahci_8c_a13b94f452e3627ca3198a57acd5bca79}{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}(iobase,  port,  reg,  val)~\hyperlink{ahci_8c_a61a849a3b7f0d85e15409186b27cf615}{A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}((iobase), \hyperlink{ahci_8c_aa3bf2d4de92b360834630e5f9b7a6a9a}{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG}((port), (reg)), val)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{ahci_8c_a8d6e80702a8ccdf78f1d83072f91ad7b}{start\+\_\+cmd} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port)
\item 
void \hyperlink{ahci_8c_ad60974eb6bca7aacc9855ab9ce1fac6d}{stop\+\_\+cmd} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port)
\item 
int \hyperlink{ahci_8c_a531b211cecf3b4ba119999758426ee90}{find\+\_\+cmdslot} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port)
\item 
char $\ast$ \hyperlink{ahci_8c_a1fb0389d499a48ea78780c3703fc95b7}{get\+\_\+device\+\_\+info} (\hyperlink{common_8h_ade81be9b965e7be1641f9792ba8af75e}{u16int} vendor\+ID, \hyperlink{common_8h_ade81be9b965e7be1641f9792ba8af75e}{u16int} device\+ID)
\item 
int \hyperlink{ahci_8c_a0fe47f9aac2b2aec861fd41a0daa7395}{check\+A\+H\+CI} ()
\item 
int \hyperlink{ahci_8c_af24a01597e1348736d9be50d1fcca43f}{I\+D\+E\+N\+T\+I\+F\+Ydrive} (\hyperlink{ahci_8h_a56fc06d9da2a7877676381fa5d6e3f14}{Disk\+\_\+dev\+\_\+t} $\ast$disk)
\item 
void \hyperlink{ahci_8c_ab07adb383d3ba0b4d8e6093d45455c74}{test\+\_\+sata} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port)
\item 
void \hyperlink{ahci_8c_a5df8e476d7a0b721d3a030723d47b01d}{probe\+\_\+port} (\hyperlink{ahci_8h_ab96b6569496032fff3ef2bb8aae95e27}{ahci\+\_\+t} $\ast$ahci\+\_\+c)
\item 
int \hyperlink{ahci_8c_a4b36e6c71cacb00c6fe98d7e6c97f151}{check\+\_\+type} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port)
\item 
void \hyperlink{ahci_8c_aac01d321e11083538d8ed7a94cc689f9}{port\+\_\+rebase} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port, int portno)
\item 
int \hyperlink{ahci_8c_a3650154a1678715e41b52bda913299db}{read} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} startl, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} starth, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} count, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} buf)
\item 
int \hyperlink{ahci_8c_a19bfae18abb71f9c296ca65f4aea58e0}{write} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} startl, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} starth, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} count, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} buf)
\item 
int \hyperlink{ahci_8c_aac2879a211eb0aac18ec6883174c2725}{S\+A\+T\+A\+\_\+\+Commander} (\hyperlink{ahci_8h_ace0b5fb17e1a588ab172cbf436c0a3d3}{H\+B\+A\+\_\+\+P\+O\+RT} $\ast$port, \hyperlink{ahci_8h_ab24077addd3b7b13e086987ff296552c}{W\+O\+RD} \hyperlink{structCommand}{Command}, \hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{B\+Y\+TE} rw, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} buf, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} prdtl, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} dbc, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} startl, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} starth, \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{D\+W\+O\+RD} count)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{ahci_8h_ab96b6569496032fff3ef2bb8aae95e27}{ahci\+\_\+t} $\ast$ \hyperlink{ahci_8c_afd17a5aedbd8bd935cad000d4147d6c2}{test1}
\item 
unsigned int \hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks}
\item 
unsigned int \hyperlink{ahci_8c_a3340c0e792ae44d0af90dcad0a47fcf2}{controllers}
\item 
unsigned int \hyperlink{ahci_8c_a829d48eff93a24012e522fca8fa6aeea}{bus}
\item 
unsigned int \hyperlink{ahci_8c_ac9fe1492f3fc88db647f830b7dad9446}{device}
\item 
unsigned int \hyperlink{ahci_8c_a3b56e67c68d28003939a2da223f12671}{func}
\item 
\hyperlink{ahci_8h_ae8f43a819765acf561678633a75fa104}{H\+B\+A\+\_\+\+M\+EM} $\ast$ \hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}
\item 
\hyperlink{common_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{ahci_8c_a22895a1f290ae5acc854595da81a7128}{A\+H\+CI}
\item 
uint8\+\_\+t \hyperlink{ahci_8c_a3af2180010826f632153d8428bac73f8}{ahci\+\_\+found} =0
\item 
uint32\+\_\+t \hyperlink{ahci_8c_a8a153376dbea966579104c946bee1494}{data\+\_\+base} =0
\item 
uint32\+\_\+t $\ast$ \hyperlink{ahci_8c_a0894bd3d5a632c5ce4db717615a138cd}{satatest}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+AE@{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+AE}}
\index{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+AE@{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+AE}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+AE}{AHCI_GHC_AE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+AE~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(31)}\hypertarget{ahci_8c_a9f339cfee9eaea8761f985fa54772353}{}\label{ahci_8c_a9f339cfee9eaea8761f985fa54772353}


Definition at line 25 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+HR@{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+HR}}
\index{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+HR@{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+HR}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+HR}{AHCI_GHC_HR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+HR~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(0)}\hypertarget{ahci_8c_a75fe6278df56ae5699cc170b5be33352}{}\label{ahci_8c_a75fe6278df56ae5699cc170b5be33352}


Definition at line 27 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+IR@{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+IR}}
\index{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+IR@{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+IR}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+IR}{AHCI_GHC_IR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+G\+H\+C\+\_\+\+IR~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(1)}\hypertarget{ahci_8c_acc04c3cd55f57936ee1069358f68da8f}{}\label{ahci_8c_acc04c3cd55f57936ee1069358f68da8f}


Definition at line 26 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE@{A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE}}
\index{A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE@{A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE}{AHCI_HBA_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE~0x100}\hypertarget{ahci_8c_a2d86364383a86690559c549be1306752}{}\label{ahci_8c_a2d86364383a86690559c549be1306752}
Global register set. 

Definition at line 20 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG@{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG}}
\index{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG@{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG}{AHCI_PORT_REG}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG(
\begin{DoxyParamCaption}
\item[{}]{port, }
\item[{}]{reg}
\end{DoxyParamCaption}
)~({\bf A\+H\+C\+I\+\_\+\+H\+B\+A\+\_\+\+S\+I\+ZE} + (port) $\ast$ {\bf A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE} + (reg))}\hypertarget{ahci_8c_aa3bf2d4de92b360834630e5f9b7a6a9a}{}\label{ahci_8c_aa3bf2d4de92b360834630e5f9b7a6a9a}
Returns the absolute register offset from a given port and port register. 

Definition at line 57 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE@{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE}}
\index{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE@{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE}{AHCI_PORT_SIZE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+S\+I\+ZE~0x80}\hypertarget{ahci_8c_a73819b27719a9a908b43135c20936c87}{}\label{ahci_8c_a73819b27719a9a908b43135c20936c87}
Per port register set. 

Definition at line 33 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG@{A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG@{A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}{AHCI_READ_REG}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG(
\begin{DoxyParamCaption}
\item[{}]{iobase, }
\item[{}]{reg, }
\item[{}]{val}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a61a849a3b7f0d85e15409186b27cf615}{}\label{ahci_8c_a61a849a3b7f0d85e15409186b27cf615}
{\bfseries Value\+:}
\begin{DoxyCode}
\hyperlink{sys_8h_ab53ee9eece30b2ac66ec33f66ebaa325}{outl}((iobase) + \hyperlink{ahci_8c_ad66339e6ba6e4b74116fa076724d6928}{AHCI\_REG\_IDX}, reg);    \(\backslash\)
    (val) = \hyperlink{sys_8h_a42d0bfc1f7ce1d7334607503f60b4202}{inl}((iobase) + \hyperlink{ahci_8c_a277abb80722f7d8ccf23f616891902df}{AHCI\_REG\_DATA})
\end{DoxyCode}
Reads from a A\+H\+CI register. 

Definition at line 68 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+C\+AP@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+C\+AP}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+C\+AP@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+C\+AP}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+C\+AP}{AHCI_REG_CAP}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+C\+AP~((uint32\+\_\+t)0x00)}\hypertarget{ahci_8c_af5cda4f8d40a08d516e44dc24e060fa2}{}\label{ahci_8c_af5cda4f8d40a08d516e44dc24e060fa2}


Definition at line 23 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+D\+A\+TA@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+D\+A\+TA}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+D\+A\+TA@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+D\+A\+TA}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+D\+A\+TA}{AHCI_REG_DATA}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+D\+A\+TA~4}\hypertarget{ahci_8c_a277abb80722f7d8ccf23f616891902df}{}\label{ahci_8c_a277abb80722f7d8ccf23f616891902df}


Definition at line 60 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+G\+HC@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+G\+HC}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+G\+HC@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+G\+HC}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+G\+HC}{AHCI_REG_GHC}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+G\+HC~((uint32\+\_\+t)0x04)}\hypertarget{ahci_8c_a93e01cdf25a2066c34df2af9e493e6be}{}\label{ahci_8c_a93e01cdf25a2066c34df2af9e493e6be}


Definition at line 24 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+I\+DX@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+I\+DX}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+I\+DX@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+I\+DX}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+I\+DX}{AHCI_REG_IDX}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+I\+DX~0}\hypertarget{ahci_8c_ad66339e6ba6e4b74116fa076724d6928}{}\label{ahci_8c_ad66339e6ba6e4b74116fa076724d6928}


Definition at line 59 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+IS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+IS}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+IS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+IS}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+IS}{AHCI_REG_IS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+IS~((uint32\+\_\+t)0x08)}\hypertarget{ahci_8c_a50140ab57bd0d4ad2a6b43a0d10ff5ed}{}\label{ahci_8c_a50140ab57bd0d4ad2a6b43a0d10ff5ed}


Definition at line 28 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+PI@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+PI}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+PI@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+PI}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+PI}{AHCI_REG_PI}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+PI~((uint32\+\_\+t)0x0c)}\hypertarget{ahci_8c_a3bc3339722bfafbe1f0c0bebcf6cf63e}{}\label{ahci_8c_a3bc3339722bfafbe1f0c0bebcf6cf63e}


Definition at line 29 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+CI@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+CI}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+CI@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+CI}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+CI}{AHCI_REG_PORT_CI}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+CI~0x38}\hypertarget{ahci_8c_a18e97430456e2738e1705c90c70bb11f}{}\label{ahci_8c_a18e97430456e2738e1705c90c70bb11f}


Definition at line 54 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+LB@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+LB}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+LB@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+LB}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+LB}{AHCI_REG_PORT_CLB}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+LB~0x00}\hypertarget{ahci_8c_ab2c8f6d71cb2d1ab4217fb3cc41cc986}{}\label{ahci_8c_ab2c8f6d71cb2d1ab4217fb3cc41cc986}


Definition at line 35 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+L\+BU@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+L\+BU}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+L\+BU@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+L\+BU}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+L\+BU}{AHCI_REG_PORT_CLBU}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+L\+BU~0x04}\hypertarget{ahci_8c_a049877c5f9362727f4f874f0468cc32f}{}\label{ahci_8c_a049877c5f9362727f4f874f0468cc32f}


Definition at line 36 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+MD@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+MD}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+MD@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+MD}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+MD}{AHCI_REG_PORT_CMD}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+MD~0x18}\hypertarget{ahci_8c_a9f8ece24491bcc7bed5204263aa744e5}{}\label{ahci_8c_a9f8ece24491bcc7bed5204263aa744e5}


Definition at line 43 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+CR@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+CR}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+CR@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+CR}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+CR}{AHCI_REG_PORT_CMD_CR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+CR~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(15)}\hypertarget{ahci_8c_a464049a346732cb6e22a13ba1ceee274}{}\label{ahci_8c_a464049a346732cb6e22a13ba1ceee274}


Definition at line 47 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+FR@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+FR}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+FR@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+FR}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+FR}{AHCI_REG_PORT_CMD_FR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+FR~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(14)}\hypertarget{ahci_8c_a63af49164314594bf8f790dc8cef7b7d}{}\label{ahci_8c_a63af49164314594bf8f790dc8cef7b7d}


Definition at line 46 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+F\+RE@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+F\+RE}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+F\+RE@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+F\+RE}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+F\+RE}{AHCI_REG_PORT_CMD_FRE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+F\+RE~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(4)}\hypertarget{ahci_8c_a3cec153d4d3567550e532d1689d1a04d}{}\label{ahci_8c_a3cec153d4d3567550e532d1689d1a04d}


Definition at line 45 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+ST@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+ST}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+ST@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+ST}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+ST}{AHCI_REG_PORT_CMD_ST}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+C\+M\+D\+\_\+\+ST~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(0)}\hypertarget{ahci_8c_a9d73c037c3dfa1654521b70d0f7154b0}{}\label{ahci_8c_a9d73c037c3dfa1654521b70d0f7154b0}


Definition at line 44 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+FB@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+FB}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+FB@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+FB}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+FB}{AHCI_REG_PORT_FB}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+FB~0x08}\hypertarget{ahci_8c_a3499f4ef66c7d3b0839d00708dededa4}{}\label{ahci_8c_a3499f4ef66c7d3b0839d00708dededa4}


Definition at line 37 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+F\+BU@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+F\+BU}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+F\+BU@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+F\+BU}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+F\+BU}{AHCI_REG_PORT_FBU}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+F\+BU~0x0c}\hypertarget{ahci_8c_ae368016cdb4ce545b9caa5147accd1ad}{}\label{ahci_8c_ae368016cdb4ce545b9caa5147accd1ad}


Definition at line 38 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IE@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IE}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IE@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IE}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IE}{AHCI_REG_PORT_IE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IE~0x14}\hypertarget{ahci_8c_a4ba72a3e49848654e20f3430e3c98e4d}{}\label{ahci_8c_a4ba72a3e49848654e20f3430e3c98e4d}


Definition at line 42 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IS}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IS}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IS}{AHCI_REG_PORT_IS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+IS~0x10}\hypertarget{ahci_8c_ad2b0a1ad58fdb414e4d5f12bcb96b79b}{}\label{ahci_8c_ad2b0a1ad58fdb414e4d5f12bcb96b79b}


Definition at line 39 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+D\+H\+RS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+D\+H\+RS}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+D\+H\+RS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+D\+H\+RS}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+D\+H\+RS}{AHCI_REG_PORT_IS_DHRS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+D\+H\+RS~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(0)}\hypertarget{ahci_8c_a563e608bf610a18ec707ece04f9df9e4}{}\label{ahci_8c_a563e608bf610a18ec707ece04f9df9e4}


Definition at line 40 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+T\+F\+ES@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+T\+F\+ES}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+T\+F\+ES@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+T\+F\+ES}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+T\+F\+ES}{AHCI_REG_PORT_IS_TFES}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+I\+S\+\_\+\+T\+F\+ES~{\bf R\+T\+\_\+\+B\+I\+T\+\_\+32}(30)}\hypertarget{ahci_8c_a5361f917029d5335a38f5ad55faa00e0}{}\label{ahci_8c_a5361f917029d5335a38f5ad55faa00e0}


Definition at line 41 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+A\+CT@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+A\+CT}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+A\+CT@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+A\+CT}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+A\+CT}{AHCI_REG_PORT_SACT}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+A\+CT~0x34}\hypertarget{ahci_8c_a686a69fc0de25f62b887262e05571621}{}\label{ahci_8c_a686a69fc0de25f62b887262e05571621}


Definition at line 53 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+C\+TL@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+C\+TL}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+C\+TL@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+C\+TL}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+C\+TL}{AHCI_REG_PORT_SCTL}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+C\+TL~0x2c}\hypertarget{ahci_8c_af7baa19a47f2d2c99b74363b77c5414c}{}\label{ahci_8c_af7baa19a47f2d2c99b74363b77c5414c}


Definition at line 51 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+E\+RR@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+E\+RR}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+E\+RR@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+E\+RR}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+E\+RR}{AHCI_REG_PORT_SERR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+E\+RR~0x30}\hypertarget{ahci_8c_a3a67c6346d2ebb7202421894feab6110}{}\label{ahci_8c_a3a67c6346d2ebb7202421894feab6110}


Definition at line 52 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+IG@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+IG}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+IG@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+IG}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+IG}{AHCI_REG_PORT_SIG}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+IG~0x24}\hypertarget{ahci_8c_a4b5bb58aea38b0a92340d9cc6a0851f5}{}\label{ahci_8c_a4b5bb58aea38b0a92340d9cc6a0851f5}


Definition at line 49 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+S\+TS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+S\+TS}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+S\+TS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+S\+TS}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+S\+TS}{AHCI_REG_PORT_SSTS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+S\+S\+TS~0x28}\hypertarget{ahci_8c_ae0bccb16cba96926e5f5b6527f38e699}{}\label{ahci_8c_ae0bccb16cba96926e5f5b6527f38e699}


Definition at line 50 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+T\+FD@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+T\+FD}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+T\+FD@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+T\+FD}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+T\+FD}{AHCI_REG_PORT_TFD}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+P\+O\+R\+T\+\_\+\+T\+FD~0x20}\hypertarget{ahci_8c_ad1e39419a1fa767210df35ee6f7b9f21}{}\label{ahci_8c_ad1e39419a1fa767210df35ee6f7b9f21}


Definition at line 48 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+VS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+VS}}
\index{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+VS@{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+VS}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+VS}{AHCI_REG_VS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+R\+E\+G\+\_\+\+VS~((uint32\+\_\+t)0x10)}\hypertarget{ahci_8c_a0a1d16904410efd99c1da8891f20795f}{}\label{ahci_8c_a0a1d16904410efd99c1da8891f20795f}


Definition at line 30 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG@{A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}}
\index{A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG@{A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}{AHCI_WRITE_REG}}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG(
\begin{DoxyParamCaption}
\item[{}]{iobase, }
\item[{}]{reg, }
\item[{}]{val}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a0b784b3fa190eb10a274fc3c1f03731b}{}\label{ahci_8c_a0b784b3fa190eb10a274fc3c1f03731b}
{\bfseries Value\+:}
\begin{DoxyCode}
\hyperlink{sys_8h_ab53ee9eece30b2ac66ec33f66ebaa325}{outl}((iobase) + \hyperlink{ahci_8c_ad66339e6ba6e4b74116fa076724d6928}{AHCI\_REG\_IDX}, reg);    \hyperlink{sys_8h_ab53ee9eece30b2ac66ec33f66ebaa325}{\(\backslash\)}
\hyperlink{sys_8h_ab53ee9eece30b2ac66ec33f66ebaa325}{    outl}((iobase) + \hyperlink{ahci_8c_a277abb80722f7d8ccf23f616891902df}{AHCI\_REG\_DATA}, val)
\end{DoxyCode}
Writes the given value to a A\+H\+CI register. 

Definition at line 63 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!P\+C\+I\+\_\+\+C\+A\+P\+\_\+\+I\+D\+\_\+\+S\+A\+T\+A\+CR@{P\+C\+I\+\_\+\+C\+A\+P\+\_\+\+I\+D\+\_\+\+S\+A\+T\+A\+CR}}
\index{P\+C\+I\+\_\+\+C\+A\+P\+\_\+\+I\+D\+\_\+\+S\+A\+T\+A\+CR@{P\+C\+I\+\_\+\+C\+A\+P\+\_\+\+I\+D\+\_\+\+S\+A\+T\+A\+CR}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{P\+C\+I\+\_\+\+C\+A\+P\+\_\+\+I\+D\+\_\+\+S\+A\+T\+A\+CR}{PCI_CAP_ID_SATACR}}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+C\+I\+\_\+\+C\+A\+P\+\_\+\+I\+D\+\_\+\+S\+A\+T\+A\+CR~0x12}\hypertarget{ahci_8c_aa2525d6c1f29e404bd2fcb0318c30167}{}\label{ahci_8c_aa2525d6c1f29e404bd2fcb0318c30167}


Definition at line 14 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!P\+C\+I\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+C\+AP@{P\+C\+I\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+C\+AP}}
\index{P\+C\+I\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+C\+AP@{P\+C\+I\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+C\+AP}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{P\+C\+I\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+C\+AP}{PCI_CONFIG_CAP}}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+C\+I\+\_\+\+C\+O\+N\+F\+I\+G\+\_\+\+C\+AP~0x34}\hypertarget{ahci_8c_af5b266248c10a117b09b0a74bbb095b9}{}\label{ahci_8c_af5b266248c10a117b09b0a74bbb095b9}
A\+H\+CI controller data.\+P\+CI configuration fields. 

Definition at line 12 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!R\+T\+\_\+\+B\+I\+T\+\_\+32@{R\+T\+\_\+\+B\+I\+T\+\_\+32}}
\index{R\+T\+\_\+\+B\+I\+T\+\_\+32@{R\+T\+\_\+\+B\+I\+T\+\_\+32}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{R\+T\+\_\+\+B\+I\+T\+\_\+32}{RT_BIT_32}}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+T\+\_\+\+B\+I\+T\+\_\+32(
\begin{DoxyParamCaption}
\item[{}]{bit}
\end{DoxyParamCaption}
)~((uint32\+\_\+t)(1\+L $<$$<$ (bit)))}\hypertarget{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}{}\label{ahci_8c_aa0ad2486d5e559f7c376f66dab5e0995}


Definition at line 17 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!V\+B\+O\+X\+\_\+\+A\+H\+C\+I\+\_\+\+N\+O\+\_\+\+D\+E\+V\+I\+CE@{V\+B\+O\+X\+\_\+\+A\+H\+C\+I\+\_\+\+N\+O\+\_\+\+D\+E\+V\+I\+CE}}
\index{V\+B\+O\+X\+\_\+\+A\+H\+C\+I\+\_\+\+N\+O\+\_\+\+D\+E\+V\+I\+CE@{V\+B\+O\+X\+\_\+\+A\+H\+C\+I\+\_\+\+N\+O\+\_\+\+D\+E\+V\+I\+CE}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{V\+B\+O\+X\+\_\+\+A\+H\+C\+I\+\_\+\+N\+O\+\_\+\+D\+E\+V\+I\+CE}{VBOX_AHCI_NO_DEVICE}}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+B\+O\+X\+\_\+\+A\+H\+C\+I\+\_\+\+N\+O\+\_\+\+D\+E\+V\+I\+CE~0xffff}\hypertarget{ahci_8c_a6e1750022d3d187235f771ea998bd37a}{}\label{ahci_8c_a6e1750022d3d187235f771ea998bd37a}


Definition at line 15 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG@{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}}
\index{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG@{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}{VBOXAHCI_PORT_READ_REG}}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG(
\begin{DoxyParamCaption}
\item[{}]{iobase, }
\item[{}]{port, }
\item[{}]{reg, }
\item[{}]{val}
\end{DoxyParamCaption}
)~{\bf A\+H\+C\+I\+\_\+\+R\+E\+A\+D\+\_\+\+R\+EG}((iobase), {\bf A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG}((port), (reg)), val)}\hypertarget{ahci_8c_a13b94f452e3627ca3198a57acd5bca79}{}\label{ahci_8c_a13b94f452e3627ca3198a57acd5bca79}
Reads from the given port register. 

Definition at line 77 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG@{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}}
\index{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG@{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}{VBOXAHCI_PORT_WRITE_REG}}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+B\+O\+X\+A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG(
\begin{DoxyParamCaption}
\item[{}]{iobase, }
\item[{}]{port, }
\item[{}]{reg, }
\item[{}]{val}
\end{DoxyParamCaption}
)~{\bf A\+H\+C\+I\+\_\+\+W\+R\+I\+T\+E\+\_\+\+R\+EG}((iobase), {\bf A\+H\+C\+I\+\_\+\+P\+O\+R\+T\+\_\+\+R\+EG}((port), (reg)), val)}\hypertarget{ahci_8c_aeed5054ede5a2a3e1261c3a7579a9228}{}\label{ahci_8c_aeed5054ede5a2a3e1261c3a7579a9228}
Writes to the given port register. 

Definition at line 73 of file ahci.\+c.



\subsection{Function Documentation}
\index{ahci.\+c@{ahci.\+c}!check\+\_\+type@{check\+\_\+type}}
\index{check\+\_\+type@{check\+\_\+type}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{check\+\_\+type(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port)}{check_type(HBA_PORT *port)}}]{\setlength{\rightskip}{0pt plus 5cm}int check\+\_\+type (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a4b36e6c71cacb00c6fe98d7e6c97f151}{}\label{ahci_8c_a4b36e6c71cacb00c6fe98d7e6c97f151}


Definition at line 262 of file ahci.\+c.


\begin{DoxyCode}
263 \{
264 
265   \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD} sact = port->sact;
266     \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD} ssts = port->ssts;
267 
268     \hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE} ipm = (ssts >> 8) & 0x0F;
269     \hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE} det = ssts & 0x0F;
270 
271   \textcolor{keywordflow}{if}(!sact)
272     \textcolor{keywordflow}{return} \hyperlink{ahci_8h_a70cb9cf6f5592304658efff34c009d0f}{AHCI\_DEV\_NULL};
273 
274     \textcolor{keywordflow}{if} (det != \hyperlink{ahci_8h_ad35e9d10e89ce48bf4f0e94929664102}{HBA\_PORT\_DET\_PRESENT})    \textcolor{comment}{// Check drive status}
275         \textcolor{keywordflow}{return} \hyperlink{ahci_8h_a70cb9cf6f5592304658efff34c009d0f}{AHCI\_DEV\_NULL};
276     \textcolor{keywordflow}{if} (ipm != \hyperlink{ahci_8h_a7799cbde4e99b339a61cb79ba018ed78}{HBA\_PORT\_IPM\_ACTIVE})
277         \textcolor{keywordflow}{return} \hyperlink{ahci_8h_a70cb9cf6f5592304658efff34c009d0f}{AHCI\_DEV\_NULL};
278 
279     \textcolor{keywordflow}{switch} (port->sig)
280     \{
281     \textcolor{keywordflow}{case} \hyperlink{ahci_8h_aa52680525d3698b9c2206cedbf2b3c82}{SATA\_SIG\_ATAPI}:
282         \textcolor{keywordflow}{return} \hyperlink{ahci_8h_af14cd62b8394e7284ed7880e9a6cd379}{AHCI\_DEV\_SATAPI};
283     \textcolor{keywordflow}{case} \hyperlink{ahci_8h_a74a4ae0fdaf517fb886dfe8fc53218db}{SATA\_SIG\_SEMB}:
284         \textcolor{keywordflow}{return} \hyperlink{ahci_8h_a252890fb3343fb24494794f3f2c33a92}{AHCI\_DEV\_SEMB};
285     \textcolor{keywordflow}{case} \hyperlink{ahci_8h_a5824e44ad5e394c0026dad1f997d26d3}{SATA\_SIG\_PM}:
286         \textcolor{keywordflow}{return} \hyperlink{ahci_8h_a388f0e67c6bf032307b8e8192bf07c47}{AHCI\_DEV\_PM};
287     \textcolor{keywordflow}{default}:
288         \textcolor{keywordflow}{return} \hyperlink{ahci_8h_a528bf8cf48a25cbb5faf1b47aa41469c}{AHCI\_DEV\_SATA};
289     \}
290 \}
\end{DoxyCode}
\index{ahci.\+c@{ahci.\+c}!check\+A\+H\+CI@{check\+A\+H\+CI}}
\index{check\+A\+H\+CI@{check\+A\+H\+CI}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{check\+A\+H\+C\+I()}{checkAHCI()}}]{\setlength{\rightskip}{0pt plus 5cm}int check\+A\+H\+CI (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a0fe47f9aac2b2aec861fd41a0daa7395}{}\label{ahci_8c_a0fe47f9aac2b2aec861fd41a0daa7395}


Definition at line 108 of file ahci.\+c.


\begin{DoxyCode}
109 \{
110     \hyperlink{ahci_8h_a9d8d377fb207693cbb887fb21f04bf9b}{ahci}=(\hyperlink{struct__ahci}{ahci\_t}*)\hyperlink{mem_8c_a289ed80726a2c8adc2fa154f442eaad7}{kmalloc}(4096);
111     \hyperlink{ahci_8h_adce6054082ee4cf12839a8fe1f1e9501}{ahci\_start}=\hyperlink{ahci_8h_a9d8d377fb207693cbb887fb21f04bf9b}{ahci};
112     \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}=(\hyperlink{structDisk__dev__}{Disk\_dev\_t}*)\hyperlink{mem_8c_a289ed80726a2c8adc2fa154f442eaad7}{kmalloc}(4096);
113     \hyperlink{ahci_8h_ab2efb11d8b89d1df364ede7597055aec}{Disk\_dev\_start}=\hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev};
114     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} ahcis=0;ahcis<TotalAHCIDevices;ahcis++)
115     \{
116       ++\hyperlink{ahci_8c_a3340c0e792ae44d0af90dcad0a47fcf2}{controllers};
117       \hyperlink{ahci_8h_a9d8d377fb207693cbb887fb21f04bf9b}{ahci}->\hyperlink{struct__ahci_ae21f72444b86864fa029b0386bce745c}{ahci}=&AHCI\_Devices[ahcis];
118       \hyperlink{console_8c_a7e3f5006dd96b9d8c61242ddc5351832}{console\_writestring}(\hyperlink{ahci_8c_a1fb0389d499a48ea78780c3703fc95b7}{get\_device\_info}(\hyperlink{ahci_8h_a9d8d377fb207693cbb887fb21f04bf9b}{ahci}->
      \hyperlink{struct__ahci_ae21f72444b86864fa029b0386bce745c}{ahci}->\hyperlink{struct__PciDevice_a308d9d7234decbd3802735bf0a83e156}{Header}->\hyperlink{struct__PciNativeHeader_acc809b557a84fbe99da19b442210e6a1}{VendorId},\hyperlink{ahci_8h_a9d8d377fb207693cbb887fb21f04bf9b}{ahci}->\hyperlink{struct__ahci_ae21f72444b86864fa029b0386bce745c}{ahci}->\hyperlink{struct__PciDevice_a308d9d7234decbd3802735bf0a83e156}{Header}->
      \hyperlink{struct__PciNativeHeader_a4cb00b77b64768cc8754c3b5938a09ea}{DeviceId}));
119       \hyperlink{console_8c_a7e3f5006dd96b9d8c61242ddc5351832}{console\_writestring}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)tAHCI CONTROLLER #"});
120       \hyperlink{console_8c_a0962a25f4eb04ccc0f0f2a1418091b35}{console\_write\_dec}(\hyperlink{ahci_8c_a3340c0e792ae44d0af90dcad0a47fcf2}{controllers});
121       \hyperlink{console_8c_a7e3f5006dd96b9d8c61242ddc5351832}{console\_writestring}(\textcolor{stringliteral}{" FOUND, INITIALIZING AHCI CONTROLLER and Disks"});
122       \hyperlink{ahci_8c_a5df8e476d7a0b721d3a030723d47b01d}{probe\_port}(\hyperlink{ahci_8h_a9d8d377fb207693cbb887fb21f04bf9b}{ahci});
123       \hyperlink{console_8c_a7e3f5006dd96b9d8c61242ddc5351832}{console\_writestring}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)tAHCI CONTROLLER Initialized\(\backslash\)n"});
124       \hyperlink{ahci_8h_a9d8d377fb207693cbb887fb21f04bf9b}{ahci}->\hyperlink{struct__ahci_a767cb219a1220db83c0c934c5b9f260f}{ControllerID}=\hyperlink{ahci_8c_a3340c0e792ae44d0af90dcad0a47fcf2}{controllers};
125       \hyperlink{ahci_8c_a3af2180010826f632153d8428bac73f8}{ahci\_found}=1;
126       ++\hyperlink{ahci_8h_a9d8d377fb207693cbb887fb21f04bf9b}{ahci};
127     \}
128     \hyperlink{console_8c_a7e3f5006dd96b9d8c61242ddc5351832}{console\_writestring}(\textcolor{stringliteral}{"\(\backslash\)n"});
129     \textcolor{keywordflow}{return} \hyperlink{ahci_8c_a3340c0e792ae44d0af90dcad0a47fcf2}{controllers};
130 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c_a0fe47f9aac2b2aec861fd41a0daa7395_cgraph}
\end{center}
\end{figure}


\index{ahci.\+c@{ahci.\+c}!find\+\_\+cmdslot@{find\+\_\+cmdslot}}
\index{find\+\_\+cmdslot@{find\+\_\+cmdslot}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{find\+\_\+cmdslot(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port)}{find_cmdslot(HBA_PORT *port)}}]{\setlength{\rightskip}{0pt plus 5cm}int find\+\_\+cmdslot (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a531b211cecf3b4ba119999758426ee90}{}\label{ahci_8c_a531b211cecf3b4ba119999758426ee90}


Definition at line 466 of file ahci.\+c.


\begin{DoxyCode}
467 \{
468     \textcolor{comment}{// An empty command slot has its respective bit cleared to �0� in both the PxCI and PxSACT registers.}
469         \textcolor{comment}{// If not set in SACT and CI, the slot is free // Checked}
470 
471         \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD} slots = (port->sact | port->ci);
472         \textcolor{keywordtype}{int} cmdslots= (\hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->cap & 0x0f00)>>8 ; \textcolor{comment}{// Bit 8-12}
473         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<cmdslots; i++)
474         \{
475             \textcolor{keywordflow}{if} ((slots&1) == 0)
476                 \textcolor{keywordflow}{return} i;
477             slots >>= 1;
478         \}
479         \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"Cannot find free command list entry\(\backslash\)n"});
480         \textcolor{keywordflow}{return} -1;
481 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c_a531b211cecf3b4ba119999758426ee90_cgraph}
\end{center}
\end{figure}


\index{ahci.\+c@{ahci.\+c}!get\+\_\+device\+\_\+info@{get\+\_\+device\+\_\+info}}
\index{get\+\_\+device\+\_\+info@{get\+\_\+device\+\_\+info}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{get\+\_\+device\+\_\+info(u16int vendor\+I\+D, u16int device\+I\+D)}{get_device_info(u16int vendorID, u16int deviceID)}}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ get\+\_\+device\+\_\+info (
\begin{DoxyParamCaption}
\item[{{\bf u16int}}]{vendor\+ID, }
\item[{{\bf u16int}}]{device\+ID}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a1fb0389d499a48ea78780c3703fc95b7}{}\label{ahci_8c_a1fb0389d499a48ea78780c3703fc95b7}


Definition at line 91 of file ahci.\+c.


\begin{DoxyCode}
92 \{
93     \textcolor{keyword}{const} \hyperlink{structdeviceinfo}{device\_info} *info;
94     \textcolor{keywordflow}{for} (info = \hyperlink{ahci__device__list_8h_ad85fb3ab3f1f0fbfbf25565d9db89c6a}{kSupportedDevices}; info->\hyperlink{structdeviceinfo_a5c3543ae796c7c71e2c2bc4115993032}{vendor}; info++)
95     \{
96         \textcolor{keywordflow}{if} (info->\hyperlink{structdeviceinfo_a5c3543ae796c7c71e2c2bc4115993032}{vendor} == vendorID && info->\hyperlink{structdeviceinfo_a3993f13c10f3be69e3113f20d2b6e9ca}{device} == deviceID)
97         \{
98             \textcolor{keywordflow}{return} info->\hyperlink{structdeviceinfo_a9fbfd796851d53a945a0d4f4ea96a45f}{name};
99         \}
100     \}
101     \textcolor{keywordflow}{return} 0;
102 \}
\end{DoxyCode}
\index{ahci.\+c@{ahci.\+c}!I\+D\+E\+N\+T\+I\+F\+Ydrive@{I\+D\+E\+N\+T\+I\+F\+Ydrive}}
\index{I\+D\+E\+N\+T\+I\+F\+Ydrive@{I\+D\+E\+N\+T\+I\+F\+Ydrive}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{I\+D\+E\+N\+T\+I\+F\+Ydrive(\+Disk\+\_\+dev\+\_\+t $\ast$disk)}{IDENTIFYdrive(Disk_dev_t *disk)}}]{\setlength{\rightskip}{0pt plus 5cm}int I\+D\+E\+N\+T\+I\+F\+Ydrive (
\begin{DoxyParamCaption}
\item[{{\bf Disk\+\_\+dev\+\_\+t} $\ast$}]{disk}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_af24a01597e1348736d9be50d1fcca43f}{}\label{ahci_8c_af24a01597e1348736d9be50d1fcca43f}


Definition at line 134 of file ahci.\+c.


\begin{DoxyCode}
135 \{
136   disk->\hyperlink{structDisk__dev___a52e2a9b907b950dd16310e9580a43424}{info} = (\hyperlink{structSATA__ident}{SATA\_ident\_t}*)\hyperlink{mem_8c_a289ed80726a2c8adc2fa154f442eaad7}{kmalloc}(512);
137   \hyperlink{ahci_8c_aac2879a211eb0aac18ec6883174c2725}{SATA\_Commander}(disk->\hyperlink{structDisk__dev___acdebd9b96abc7fbf3f115417afc7a887}{port},\hyperlink{ata_8h_a572958103bba5d355c7fe135ae7526bd}{ATA\_CMD\_IDENTIFY},0,disk->
      \hyperlink{structDisk__dev___a52e2a9b907b950dd16310e9580a43424}{info},1,512,0,0,0);
138   \hyperlink{structSATA__ident}{SATA\_ident\_t}* SATA\_Identify\_info = (\hyperlink{structSATA__ident}{SATA\_ident\_t}*)disk->
      \hyperlink{structDisk__dev___a52e2a9b907b950dd16310e9580a43424}{info};
139 
140   \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t The Data we Recieved from identity command:\(\backslash\)n\(\backslash\)t"});
141   \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t\(\backslash\)tSerial Number: %s \(\backslash\)n\(\backslash\)t\(\backslash\)tModel Number: %s\(\backslash\)n\(\backslash\)t\(\backslash\)tFirmware: %s\(\backslash\)n"},
142           SATA\_Identify\_info->\hyperlink{structSATA__ident_ab3928623c2c1f05d7dd0635aef68adf7}{serial\_no},SATA\_Identify\_info->\hyperlink{structSATA__ident_a2a36d687174ca2eebc0587eb0882e89f}{model},SATA\_Identify\_info->
      \hyperlink{structSATA__ident_a083cc6c6f2a7728709aff9726f8c6913}{fw\_rev});
143   \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)tTotal Logical Sectors: %x "},SATA\_Identify\_info->\hyperlink{structSATA__ident_acd8bcb50bbcde8afa6b790e733569563}{lba\_capacity});
144   \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"  Heads: %x Sectors: %x Cyclinders: %x Bytes per sectors: %x Bytes per track: %x"}
145           ,SATA\_Identify\_info->\hyperlink{structSATA__ident_a3e5cda071ccaf6040395b709b17af752}{heads},SATA\_Identify\_info->\hyperlink{structSATA__ident_ad3a035c565a78ea9fafaf696ab2e29b8}{sectors},SATA\_Identify\_info->
      \hyperlink{structSATA__ident_a4ecef9e7e7c21adcd2cdbbb6947074f7}{cyls},
146           SATA\_Identify\_info->\hyperlink{structSATA__ident_a586fe0828c423dac3306683c0b275a35}{sector\_bytes},SATA\_Identify\_info->
      \hyperlink{structSATA__ident_afc42e0fec367087ac600bf1eee537efb}{track\_bytes});
147 
148   \textcolor{comment}{//str="YEPIEEE IT WORKS :D I CAN READ AND WRITE TO THIS HARD DISK :D \(\backslash\)0";}
149   \textcolor{keywordflow}{return} 1;
150 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c_af24a01597e1348736d9be50d1fcca43f_cgraph}
\end{center}
\end{figure}


\index{ahci.\+c@{ahci.\+c}!port\+\_\+rebase@{port\+\_\+rebase}}
\index{port\+\_\+rebase@{port\+\_\+rebase}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{port\+\_\+rebase(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port, int portno)}{port_rebase(HBA_PORT *port, int portno)}}]{\setlength{\rightskip}{0pt plus 5cm}void port\+\_\+rebase (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port, }
\item[{int}]{portno}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_aac01d321e11083538d8ed7a94cc689f9}{}\label{ahci_8c_aac01d321e11083538d8ed7a94cc689f9}


Definition at line 292 of file ahci.\+c.


\begin{DoxyCode}
293 \{
294   \hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ghc=(\hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD})(1<<31);
295   \hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ghc=(\hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD})(1<<0);
296   \hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ghc=(\hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD})(1<<31);
297   \hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ghc=(\hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD})(1<<1);
298     \hyperlink{ahci_8c_ad60974eb6bca7aacc9855ab9ce1fac6d}{stop\_cmd}(port); \textcolor{comment}{// Stop command engine}
299 
300   port->cmd=port->cmd & 0xffff7fff; \textcolor{comment}{//Bit 15}
301   port->cmd=port->cmd & 0xffffbfff; \textcolor{comment}{//Bit 14}
302   port->cmd=port->cmd & 0xfffffffe; \textcolor{comment}{//Bit 0}
303   port->cmd=port->cmd & 0xfffffff7; \textcolor{comment}{//Bit 4}
304 
305   port->serr = 0xffff;\textcolor{comment}{//For each implemented port, clear the PxSERR register, by writing 1 to each
       mplemented location}
306   port->is=0;
307   \textcolor{comment}{//printf("command engine stopped");}
308     \textcolor{comment}{// Command list offset: 1K*portno}
309     \textcolor{comment}{// Command list entry size = 32}
310     \textcolor{comment}{// Command list entry maxim count = 32}
311     \textcolor{comment}{// Command list maxim size = 32*32 = 1K per port}
312     port->clb = \hyperlink{ahci_8h_ad88c627026131a824565f1c0aad47110}{AHCI\_BASE} + (portno*1024);
313     port->clbu = 0;
314     \hyperlink{string_8h_ab70ae7ba054fd55023ccf5b7ceae875a}{memset}((\textcolor{keywordtype}{void}*)(port->clb), 0, 1024);
315 
316     \textcolor{comment}{// FIS offset: 32K+256*portno}
317     \textcolor{comment}{// FIS entry size = 256 bytes per port}
318     port->fb = \hyperlink{ahci_8h_ad88c627026131a824565f1c0aad47110}{AHCI\_BASE} + (32*1024) + (256*portno);
319     port->fbu = 0;
320     \hyperlink{string_8h_ab70ae7ba054fd55023ccf5b7ceae875a}{memset}((\textcolor{keywordtype}{void}*)(port->fb), 0, 256);
321 
322     \textcolor{comment}{// Command table offset: 40K + 8K*portno}
323     \textcolor{comment}{// Command table size = 256*32 = 8K per port}
324     \hyperlink{structtagHBA__CMD__HEADER}{HBA\_CMD\_HEADER} *cmdheader = (\hyperlink{structtagHBA__CMD__HEADER}{HBA\_CMD\_HEADER}*)(port->clb);
325     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<32; i++)
326     \{
327         cmdheader[i].\hyperlink{structtagHBA__CMD__HEADER_a6be02a265a235d2fae8eb7d489d2781b}{prdtl} = 8;    \textcolor{comment}{// 8 prdt entries per command table}
328                     \textcolor{comment}{// 256 bytes per command table, 64+16+48+16*8}
329         \textcolor{comment}{// Command table offset: 40K + 8K*portno + cmdheader\_index*256}
330         cmdheader[i].\hyperlink{structtagHBA__CMD__HEADER_a23dac028da6e65c527334115cc308cbd}{ctba} = \hyperlink{ahci_8h_ad88c627026131a824565f1c0aad47110}{AHCI\_BASE} + (40*1024) + (portno*8*1024) + (i*256);
331         cmdheader[i].\hyperlink{structtagHBA__CMD__HEADER_ae7a7bf6238069c6a3149cafb38de2358}{ctbau} = 0;
332         \hyperlink{string_8h_ab70ae7ba054fd55023ccf5b7ceae875a}{memset}((\textcolor{keywordtype}{void}*)cmdheader[i].ctba, 0, 256);
333     \}
334 
335     \hyperlink{ahci_8c_a8d6e80702a8ccdf78f1d83072f91ad7b}{start\_cmd}(port);   \textcolor{comment}{// Start command engine}
336   port->is = 0;
337   port->ie = 0xffffffff;
338 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{ahci_8c_aac01d321e11083538d8ed7a94cc689f9_cgraph}
\end{center}
\end{figure}


\index{ahci.\+c@{ahci.\+c}!probe\+\_\+port@{probe\+\_\+port}}
\index{probe\+\_\+port@{probe\+\_\+port}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{probe\+\_\+port(ahci\+\_\+t $\ast$ahci\+\_\+c)}{probe_port(ahci_t *ahci_c)}}]{\setlength{\rightskip}{0pt plus 5cm}void probe\+\_\+port (
\begin{DoxyParamCaption}
\item[{{\bf ahci\+\_\+t} $\ast$}]{ahci\+\_\+c}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a5df8e476d7a0b721d3a030723d47b01d}{}\label{ahci_8c_a5df8e476d7a0b721d3a030723d47b01d}


Definition at line 168 of file ahci.\+c.


\begin{DoxyCode}
169 \{
170   \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}=\hyperlink{mem_8c_a289ed80726a2c8adc2fa154f442eaad7}{kmalloc}(4096);
171   \hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}=(\hyperlink{ahci_8h_ae8f43a819765acf561678633a75fa104}{HBA\_MEM}*)ahci\_c->\hyperlink{struct__ahci_ae21f72444b86864fa029b0386bce745c}{ahci}->\hyperlink{struct__PciDevice_a308d9d7234decbd3802735bf0a83e156}{Header}->\hyperlink{struct__PciNativeHeader_aa18626af4b1e61cb290c6c8fb2e8a895}{Bar5};
172     \textcolor{comment}{// Search disk in impelemented ports}
173     \hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD} pi = \hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->pi;
174   uint32\_t temp2=0;
175     \textcolor{keywordtype}{int} i = 0;
176     while (i<32)
177     \{
178         \textcolor{keywordflow}{if} (pi & (1))
179         \{
180         \textcolor{comment}{//printf("\(\backslash\)nports: %x",pi);}
181             \textcolor{keywordtype}{int} dt = \hyperlink{ahci_8c_a4b36e6c71cacb00c6fe98d7e6c97f151}{check\_type}(&\hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ports[i]);
182         \textcolor{keywordflow}{if}(dt && !(\hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ports[i].cmd&(1<<0)))
183             \{
184             \hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ports[i].cmd|=(1<<0);
185         \}
186         \textcolor{keywordflow}{if} (dt == \hyperlink{ahci_8h_a528bf8cf48a25cbb5faf1b47aa41469c}{AHCI\_DEV\_SATA})
187             \{
188                 \hyperlink{ahci_8c_a22895a1f290ae5acc854595da81a7128}{AHCI}=1;
189             \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}[\hyperlink{ahci_8h_abb1148b07f2233bf8a517d71dcf8e568}{sata}].\hyperlink{structDisk__dev___a89cfdf098591b267dfc55bd79a8e3335}{type}=1; \textcolor{comment}{//1=SATA}
190             \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}[\hyperlink{ahci_8h_abb1148b07f2233bf8a517d71dcf8e568}{sata}].\hyperlink{structDisk__dev___acdebd9b96abc7fbf3f115417afc7a887}{port}=&\hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ports[i];
191             ahci\_c->\hyperlink{struct__ahci_ae0b46ff5a72b27e8d91fa39d5bd70a74}{Disk}[i]=\hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}[\hyperlink{ahci_8h_abb1148b07f2233bf8a517d71dcf8e568}{sata}];
192             ahci\_c->\hyperlink{struct__ahci_a8964e69e694ed4ae3a4990889324eaa8}{Disks}=\hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks};
193             ++\hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks};
194             ++\hyperlink{ahci_8h_abb1148b07f2233bf8a517d71dcf8e568}{sata};
195             temp2|=(1<<i);
196                 \textcolor{comment}{//  printf("\(\backslash\)n\(\backslash\)t\(\backslash\)tSATA drive #%x found \(\backslash\)n",sata);}
197             \textcolor{comment}{//port\_rebase(&abar->ports[i],i);}
198             \textcolor{comment}{//test\_sata(&abar->ports[i]);}
199             \textcolor{comment}{//int a=IDENTIFYdrive(&ahci\_c->Disk[i]);}
200             \textcolor{comment}{//printf("\(\backslash\)n\(\backslash\)tDrive: %x ssts:%x sig:%x sact:%x ",a,port->ssts,port->sig,port->sact);}
201 
202             \}
203             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dt == \hyperlink{ahci_8h_af14cd62b8394e7284ed7880e9a6cd379}{AHCI\_DEV\_SATAPI})
204             \{
205                 \hyperlink{ahci_8c_a22895a1f290ae5acc854595da81a7128}{AHCI}=1;
206             \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}->\hyperlink{structDisk__dev___a89cfdf098591b267dfc55bd79a8e3335}{type}=2; \textcolor{comment}{//2=SATAPI}
207             \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}->\hyperlink{structDisk__dev___acdebd9b96abc7fbf3f115417afc7a887}{port}=&\hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ports[i];
208             ahci\_c->\hyperlink{struct__ahci_ae0b46ff5a72b27e8d91fa39d5bd70a74}{Disk}[i]=*\hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev};
209             ahci\_c->\hyperlink{struct__ahci_a8964e69e694ed4ae3a4990889324eaa8}{Disks}=\hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks};
210             ++\hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev};
211             ++\hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks};
212                 \hyperlink{console_8c_a7e3f5006dd96b9d8c61242ddc5351832}{console\_writestring}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t\(\backslash\)tSATAPI drive found \(\backslash\)n"});
213             \}
214             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dt == \hyperlink{ahci_8h_a252890fb3343fb24494794f3f2c33a92}{AHCI\_DEV\_SEMB})
215             \{
216                 \hyperlink{ahci_8c_a22895a1f290ae5acc854595da81a7128}{AHCI}=1;
217             \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}->\hyperlink{structDisk__dev___a89cfdf098591b267dfc55bd79a8e3335}{type}=3; \textcolor{comment}{//3=SEMB}
218             \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}->\hyperlink{structDisk__dev___acdebd9b96abc7fbf3f115417afc7a887}{port}=&\hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ports[i];
219             ahci\_c->\hyperlink{struct__ahci_ae0b46ff5a72b27e8d91fa39d5bd70a74}{Disk}[i]=*\hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev};
220             ahci\_c->\hyperlink{struct__ahci_a8964e69e694ed4ae3a4990889324eaa8}{Disks}=\hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks};
221             ++\hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev};
222             ++\hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks};
223                 \hyperlink{console_8c_a7e3f5006dd96b9d8c61242ddc5351832}{console\_writestring}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t\(\backslash\)tSEMB drive found \(\backslash\)n"});
224             \}
225             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dt == \hyperlink{ahci_8h_a388f0e67c6bf032307b8e8192bf07c47}{AHCI\_DEV\_PM})
226             \{
227                 \hyperlink{ahci_8c_a22895a1f290ae5acc854595da81a7128}{AHCI}=1;
228             \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}->\hyperlink{structDisk__dev___a89cfdf098591b267dfc55bd79a8e3335}{type}=4; \textcolor{comment}{//4=PM}
229             \hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev}->\hyperlink{structDisk__dev___acdebd9b96abc7fbf3f115417afc7a887}{port}=&\hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ports[i];
230             ahci\_c->\hyperlink{struct__ahci_ae0b46ff5a72b27e8d91fa39d5bd70a74}{Disk}[i]=*\hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev};
231             ahci\_c->\hyperlink{struct__ahci_a8964e69e694ed4ae3a4990889324eaa8}{Disks}=\hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks};
232             ++\hyperlink{ahci_8h_a7bca406ff81f62c2701c7a736ee34f2a}{Disk\_dev};
233             ++\hyperlink{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{disks};
234                 \hyperlink{console_8c_a7e3f5006dd96b9d8c61242ddc5351832}{console\_writestring}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t\(\backslash\)tPM drive found \(\backslash\)n"});
235             \}
236             \textcolor{keywordflow}{else}
237             \{
238             \}
239       \}
240       pi>>=1;
241         \textcolor{comment}{//pi &=(1<<i);}
242         i ++;
243     \}
244   \textcolor{keywordflow}{if}(!\hyperlink{ahci_8c_a22895a1f290ae5acc854595da81a7128}{AHCI})
245   \{
246     \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t\(\backslash\)tNo Drives Recognized on this controller\(\backslash\)n"});
247     \textcolor{keywordflow}{return};
248   \}
249   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0,j=1;i<32;i++)
250   \{
251     \textcolor{keywordflow}{if}((temp2 & (1<<i)))
252     \{
253       \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n\(\backslash\)t\(\backslash\)tSata Disk #%x at port %x Found!\(\backslash\)n"},j++,i);
254       \hyperlink{ahci_8c_aac01d321e11083538d8ed7a94cc689f9}{port\_rebase}(&\hyperlink{ahci_8c_a74f463c1e759d7aac350a6629350991c}{abar}->ports[i],i);
255       \textcolor{comment}{//test\_sata(&abar->ports[i]);}
256       \textcolor{keywordtype}{int} a=\hyperlink{ahci_8c_af24a01597e1348736d9be50d1fcca43f}{IDENTIFYdrive}(&ahci\_c->\hyperlink{struct__ahci_ae0b46ff5a72b27e8d91fa39d5bd70a74}{Disk}[i]);
257     \}
258   \}
259 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c_a5df8e476d7a0b721d3a030723d47b01d_cgraph}
\end{center}
\end{figure}


\index{ahci.\+c@{ahci.\+c}!read@{read}}
\index{read@{read}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{read(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port, D\+W\+O\+R\+D startl, D\+W\+O\+R\+D starth, D\+W\+O\+R\+D count, D\+W\+O\+R\+D buf)}{read(HBA_PORT *port, DWORD startl, DWORD starth, DWORD count, DWORD buf)}}]{\setlength{\rightskip}{0pt plus 5cm}int read (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port, }
\item[{{\bf D\+W\+O\+RD}}]{startl, }
\item[{{\bf D\+W\+O\+RD}}]{starth, }
\item[{{\bf D\+W\+O\+RD}}]{count, }
\item[{{\bf D\+W\+O\+RD}}]{buf}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a3650154a1678715e41b52bda913299db}{}\label{ahci_8c_a3650154a1678715e41b52bda913299db}


Definition at line 371 of file ahci.\+c.


\begin{DoxyCode}
372 \{
373   \hyperlink{ahci_8c_aac2879a211eb0aac18ec6883174c2725}{SATA\_Commander}(port,\hyperlink{ata_8h_a284eeac148ef0c41c5f0ef05dff2b783a8da500d035d5775deae246da2b7e29a0}{ATA\_CMD\_READ\_SECTORS},0,buf,(
      \hyperlink{ahci_8h_ab24077addd3b7b13e086987ff296552c}{WORD})((count-1)>>4) + 1,512,startl,starth,count);
374     \textcolor{keywordflow}{if} (port->is & \hyperlink{ahci_8h_a11add414188662b170c68ead95a786d8}{HBA\_PxIS\_TFES})
375     \{
376         \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"Read disk error\(\backslash\)n"});
377         \textcolor{keywordflow}{return} 0;
378     \}
379   \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"\(\backslash\)nRead Successful\(\backslash\)n"});
380     \textcolor{keywordflow}{return} 1;
381 
382 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c_a3650154a1678715e41b52bda913299db_cgraph}
\end{center}
\end{figure}


\index{ahci.\+c@{ahci.\+c}!S\+A\+T\+A\+\_\+\+Commander@{S\+A\+T\+A\+\_\+\+Commander}}
\index{S\+A\+T\+A\+\_\+\+Commander@{S\+A\+T\+A\+\_\+\+Commander}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{S\+A\+T\+A\+\_\+\+Commander(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port, W\+O\+R\+D Command, B\+Y\+T\+E rw, D\+W\+O\+R\+D buf, D\+W\+O\+R\+D prdtl, D\+W\+O\+R\+D dbc, D\+W\+O\+R\+D startl, D\+W\+O\+R\+D starth, D\+W\+O\+R\+D count)}{SATA_Commander(HBA_PORT *port, WORD Command, BYTE rw, DWORD buf, DWORD prdtl, DWORD dbc, DWORD startl, DWORD starth, DWORD count)}}]{\setlength{\rightskip}{0pt plus 5cm}int S\+A\+T\+A\+\_\+\+Commander (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port, }
\item[{{\bf W\+O\+RD}}]{Command, }
\item[{{\bf B\+Y\+TE}}]{rw, }
\item[{{\bf D\+W\+O\+RD}}]{buf, }
\item[{{\bf D\+W\+O\+RD}}]{prdtl, }
\item[{{\bf D\+W\+O\+RD}}]{dbc, }
\item[{{\bf D\+W\+O\+RD}}]{startl, }
\item[{{\bf D\+W\+O\+RD}}]{starth, }
\item[{{\bf D\+W\+O\+RD}}]{count}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_aac2879a211eb0aac18ec6883174c2725}{}\label{ahci_8c_aac2879a211eb0aac18ec6883174c2725}


Definition at line 397 of file ahci.\+c.


\begin{DoxyCode}
398 \{
399   \textcolor{comment}{/***Make the Command Header***/}
400   \hyperlink{structtagHBA__CMD__HEADER}{HBA\_CMD\_HEADER} *cmdhead=(\hyperlink{structtagHBA__CMD__HEADER}{HBA\_CMD\_HEADER}*)port->clb;
401   cmdhead += \hyperlink{ahci_8c_a531b211cecf3b4ba119999758426ee90}{find\_cmdslot}(port);
402   cmdhead->\hyperlink{structtagHBA__CMD__HEADER_a9b96c30cf860921253cd6cbac596307c}{cfl} = \textcolor{keyword}{sizeof}(\hyperlink{ahci_8h_a8001e9b5f41caa39166f5aff6613cc3a}{FIS\_REG\_H2D})/4;
403   cmdhead->\hyperlink{structtagHBA__CMD__HEADER_ac07bb464769560ba80f2fdf92917a3a5}{a}=0;
404   cmdhead->\hyperlink{structtagHBA__CMD__HEADER_a1e268f69308d471e20b13dbfadc2b4ac}{w} = rw;
405   cmdhead->\hyperlink{structtagHBA__CMD__HEADER_a6be02a265a235d2fae8eb7d489d2781b}{prdtl} = prdtl;  \textcolor{comment}{// PRDT entries count;}
406   cmdhead->\hyperlink{structtagHBA__CMD__HEADER_a907bfe5e928116c55338fd104557af8b}{p} = 1;
407   cmdhead->\hyperlink{structtagHBA__CMD__HEADER_ac17a38c08ae3194b80e2a95180c409b5}{c} = 1;
408 
409   \textcolor{comment}{/***Make the Command Table***/}
410   \hyperlink{structtagHBA__CMD__TBL}{HBA\_CMD\_TBL} *cmdtbl = (\hyperlink{structtagHBA__CMD__TBL}{HBA\_CMD\_TBL}*)cmdhead->\hyperlink{structtagHBA__CMD__HEADER_a23dac028da6e65c527334115cc308cbd}{ctba};\textcolor{comment}{//
      kmalloc(sizeof(HBA\_CMD\_TBL));}
411   \textcolor{comment}{//cmdhead->ctba = (DWORD)cmdtbl;}
412   \hyperlink{string_8h_ab70ae7ba054fd55023ccf5b7ceae875a}{memset}((\textcolor{keywordtype}{void}*)cmdtbl, 0, \textcolor{keyword}{sizeof}(\hyperlink{ahci_8h_a2d4cd26cfca1fed961c2171bc0f1a9bd}{HBA\_CMD\_TBL}));
413 
414   \textcolor{keywordtype}{int} i=0;
415 
416   \textcolor{keywordflow}{for}(i=0;i<prdtl-1;i++)
417   \{
418     cmdtbl->\hyperlink{structtagHBA__CMD__TBL_ac3a80d88e49b7bedf62d1a84217f1385}{prdt\_entry}[i].\hyperlink{structtagHBA__PRDT__ENTRY_a71fdffa8777f52b27493937d20808ed0}{dba} = buf;
419     cmdtbl->\hyperlink{structtagHBA__CMD__TBL_ac3a80d88e49b7bedf62d1a84217f1385}{prdt\_entry}[i].\hyperlink{structtagHBA__PRDT__ENTRY_ad890ac379c385e24c3d970eadfd4d843}{dbau} = 0;
420     cmdtbl->\hyperlink{structtagHBA__CMD__TBL_ac3a80d88e49b7bedf62d1a84217f1385}{prdt\_entry}[i].\hyperlink{structtagHBA__PRDT__ENTRY_aaa3b5685ca18e1b0fea8842c2ed946e1}{dbc} = 8*1024;
421     cmdtbl->\hyperlink{structtagHBA__CMD__TBL_ac3a80d88e49b7bedf62d1a84217f1385}{prdt\_entry}[i].\hyperlink{structtagHBA__PRDT__ENTRY_ac3a73e3528f47564c5960ebf012a43be}{i} = 1;   \textcolor{comment}{// interrupt when identify complete;}
422         buf += 4*1024;  \textcolor{comment}{// 4K words}
423   \}
424 
425   cmdtbl->\hyperlink{structtagHBA__CMD__TBL_ac3a80d88e49b7bedf62d1a84217f1385}{prdt\_entry}[i].\hyperlink{structtagHBA__PRDT__ENTRY_a71fdffa8777f52b27493937d20808ed0}{dba} = buf;
426   cmdtbl->\hyperlink{structtagHBA__CMD__TBL_ac3a80d88e49b7bedf62d1a84217f1385}{prdt\_entry}[i].\hyperlink{structtagHBA__PRDT__ENTRY_ad890ac379c385e24c3d970eadfd4d843}{dbau} = 0;
427   cmdtbl->\hyperlink{structtagHBA__CMD__TBL_ac3a80d88e49b7bedf62d1a84217f1385}{prdt\_entry}[i].\hyperlink{structtagHBA__PRDT__ENTRY_aaa3b5685ca18e1b0fea8842c2ed946e1}{dbc} = dbc;
428   cmdtbl->\hyperlink{structtagHBA__CMD__TBL_ac3a80d88e49b7bedf62d1a84217f1385}{prdt\_entry}[i].\hyperlink{structtagHBA__PRDT__ENTRY_ac3a73e3528f47564c5960ebf012a43be}{i} = 1;   \textcolor{comment}{// interrupt}
429 
430   \textcolor{comment}{/***Make the IDENTIFY DEVICE h2d FIS***/}
431   \hyperlink{structtagFIS__REG__H2D}{FIS\_REG\_H2D} *cmdfis = (\hyperlink{structtagFIS__REG__H2D}{FIS\_REG\_H2D}*)(cmdtbl->\hyperlink{structtagHBA__CMD__TBL_a3f54c56e56fb43a0c72e44f72717e53a}{cfis});
432   \textcolor{comment}{//printf("cmdfis %x ",cmdfis);}
433   \hyperlink{string_8h_ab70ae7ba054fd55023ccf5b7ceae875a}{memset}((\textcolor{keywordtype}{void}*)cmdfis,0,\textcolor{keyword}{sizeof}(\hyperlink{structtagFIS__REG__H2D}{FIS\_REG\_H2D}));
434   cmdfis->\hyperlink{structtagFIS__REG__H2D_ae7e5a980a6c9a44dd0de328d857a1c26}{fis\_type} = \hyperlink{ahci_8h_ace71afc212819392a7b00fbf19feba86a6bf1b47f446739ef43faae8f336c3926}{FIS\_TYPE\_REG\_H2D};
435   cmdfis->\hyperlink{structtagFIS__REG__H2D_af3d7ccfa012a57fabf91a0e37d6af7aa}{c} = 1;
436   cmdfis->\hyperlink{structtagFIS__REG__H2D_af7352549480792f12cb42c7c849efa6c}{command} = \hyperlink{structCommand}{Command};
437 
438 
439   cmdfis->\hyperlink{structtagFIS__REG__H2D_ad2e058be53c7f303fa777fd3b2ab5053}{lba0} = (\hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE})startl;
440     cmdfis->\hyperlink{structtagFIS__REG__H2D_aed0b3493ff6d85b41ba8bcacb1899bc0}{lba1} = (\hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE})(startl>>8);
441     cmdfis->\hyperlink{structtagFIS__REG__H2D_ab52b470ae60a9537a94705f4634acdb3}{lba2} = (\hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE})(startl>>16);
442 
443     cmdfis->\hyperlink{structtagFIS__REG__H2D_a5d8089c35168c052bb286900a14c501a}{device} = (1<<6);  \textcolor{comment}{// LBA mode}
444 
445     cmdfis->\hyperlink{structtagFIS__REG__H2D_aa5f23b8b3081eb875e73bf008e14c84d}{lba3} = (\hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE})(startl>>24);
446     cmdfis->\hyperlink{structtagFIS__REG__H2D_a5083158d5ff8af8fa49c023e8549d00c}{lba4} = (\hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE})starth;
447   cmdfis->\hyperlink{structtagFIS__REG__H2D_aa8295bb116158a4e6505dfc97b180a3f}{lba5} = (\hyperlink{ahci_8h_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE})(starth>>8);
448 
449   cmdfis->\hyperlink{structtagFIS__REG__H2D_a9b662bfeeb000dc26a93a0ca1d130412}{countl} = count & 0xff;
450     cmdfis->\hyperlink{structtagFIS__REG__H2D_ac86100e381bacf65c1562f89be035202}{counth} = (count>>8);
451 
452   \textcolor{comment}{/***Send the Command***/}
453   port->ci=1;
454 
455   \textcolor{comment}{/***Wait for a reply***/}
456   \textcolor{keywordflow}{while}(1)
457   \{
458     \textcolor{keywordflow}{if}(port->ci == 0)
459     \{
460       \textcolor{keywordflow}{break};
461     \}
462   \}
463   \textcolor{keywordflow}{return} 1;
464 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c_aac2879a211eb0aac18ec6883174c2725_cgraph}
\end{center}
\end{figure}


\index{ahci.\+c@{ahci.\+c}!start\+\_\+cmd@{start\+\_\+cmd}}
\index{start\+\_\+cmd@{start\+\_\+cmd}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{start\+\_\+cmd(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port)}{start_cmd(HBA_PORT *port)}}]{\setlength{\rightskip}{0pt plus 5cm}void start\+\_\+cmd (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a8d6e80702a8ccdf78f1d83072f91ad7b}{}\label{ahci_8c_a8d6e80702a8ccdf78f1d83072f91ad7b}


Definition at line 341 of file ahci.\+c.


\begin{DoxyCode}
342 \{
343     \textcolor{comment}{// Wait until CR (bit15) is cleared}
344     \textcolor{comment}{//while (port->cmd & HBA\_PxCMD\_CR);}
345 
346     \textcolor{comment}{// Set FRE (bit4) and ST (bit0)}
347     port->cmd |= \hyperlink{ahci_8h_a27978dd2aac599cbd0330c923652c6e4}{HBA\_PxCMD\_FRE};
348     port->cmd |= \hyperlink{ahci_8h_a469ab8af9bf8f1f89a5c8f79b2305e34}{HBA\_PxCMD\_ST};
349 \}
\end{DoxyCode}
\index{ahci.\+c@{ahci.\+c}!stop\+\_\+cmd@{stop\+\_\+cmd}}
\index{stop\+\_\+cmd@{stop\+\_\+cmd}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{stop\+\_\+cmd(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port)}{stop_cmd(HBA_PORT *port)}}]{\setlength{\rightskip}{0pt plus 5cm}void stop\+\_\+cmd (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_ad60974eb6bca7aacc9855ab9ce1fac6d}{}\label{ahci_8c_ad60974eb6bca7aacc9855ab9ce1fac6d}


Definition at line 352 of file ahci.\+c.


\begin{DoxyCode}
353 \{
354     \textcolor{comment}{// Clear ST (bit0)}
355     port->cmd &= ~\hyperlink{ahci_8h_a469ab8af9bf8f1f89a5c8f79b2305e34}{HBA\_PxCMD\_ST};
356   port->cmd &= ~\hyperlink{ahci_8h_a27978dd2aac599cbd0330c923652c6e4}{HBA\_PxCMD\_FRE};
357     \textcolor{comment}{// Wait until FR (bit14), CR (bit15) are cleared}
358     \textcolor{keywordflow}{while}(1)
359     \{
360         \textcolor{keywordflow}{if} (port->cmd & \hyperlink{ahci_8h_a93f2b1904299d4d1920e65039ff7ce5c}{HBA\_PxCMD\_FR})
361             \textcolor{keywordflow}{continue};
362         \textcolor{keywordflow}{if} (port->cmd & \hyperlink{ahci_8h_ad2550f8f63fa32140f93da1b95354cf6}{HBA\_PxCMD\_CR})
363             \textcolor{keywordflow}{continue};
364         \textcolor{keywordflow}{break};
365     \}
366 
367     \textcolor{comment}{// Clear FRE (bit4)}
368     port->cmd &= ~\hyperlink{ahci_8h_a27978dd2aac599cbd0330c923652c6e4}{HBA\_PxCMD\_FRE};
369 \}
\end{DoxyCode}
\index{ahci.\+c@{ahci.\+c}!test\+\_\+sata@{test\+\_\+sata}}
\index{test\+\_\+sata@{test\+\_\+sata}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{test\+\_\+sata(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port)}{test_sata(HBA_PORT *port)}}]{\setlength{\rightskip}{0pt plus 5cm}void test\+\_\+sata (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_ab07adb383d3ba0b4d8e6093d45455c74}{}\label{ahci_8c_ab07adb383d3ba0b4d8e6093d45455c74}


Definition at line 152 of file ahci.\+c.


\begin{DoxyCode}
153 \{
154     uint32\_t* \hyperlink{ahci_8h_a3b7dbefea0b701f3b300dc4e747ac440}{test}=\hyperlink{mem_8c_a289ed80726a2c8adc2fa154f442eaad7}{kmalloc}(512);
155     uint32\_t* t1=\hyperlink{ahci_8h_a3b7dbefea0b701f3b300dc4e747ac440}{test},*t2=\hyperlink{mem_8c_a289ed80726a2c8adc2fa154f442eaad7}{kmalloc}(512),*t3=t2;
156     *t2=4284;
157     \hyperlink{ahci_8c_a19bfae18abb71f9c296ca65f4aea58e0}{write}(port,40,0,20,(\hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD})t2);
158     \hyperlink{ahci_8c_a3650154a1678715e41b52bda913299db}{read}(port,40,0,20,(\hyperlink{ahci_8h_af483253b2143078cede883fc3c111ad2}{DWORD})t1);
159     \textcolor{keywordflow}{if}(*test==*t3)
160     \{
161       \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t\(\backslash\)tRead/Write test to hard disk successful\(\backslash\)n"});
162     \}
163     \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{" %x"},*test);
164     \textcolor{comment}{//char* str;}
165     \textcolor{comment}{//memcpy((void*)str,(void*)test,64);}
166 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c_ab07adb383d3ba0b4d8e6093d45455c74_cgraph}
\end{center}
\end{figure}


\index{ahci.\+c@{ahci.\+c}!write@{write}}
\index{write@{write}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{write(\+H\+B\+A\+\_\+\+P\+O\+R\+T $\ast$port, D\+W\+O\+R\+D startl, D\+W\+O\+R\+D starth, D\+W\+O\+R\+D count, D\+W\+O\+R\+D buf)}{write(HBA_PORT *port, DWORD startl, DWORD starth, DWORD count, DWORD buf)}}]{\setlength{\rightskip}{0pt plus 5cm}int write (
\begin{DoxyParamCaption}
\item[{{\bf H\+B\+A\+\_\+\+P\+O\+RT} $\ast$}]{port, }
\item[{{\bf D\+W\+O\+RD}}]{startl, }
\item[{{\bf D\+W\+O\+RD}}]{starth, }
\item[{{\bf D\+W\+O\+RD}}]{count, }
\item[{{\bf D\+W\+O\+RD}}]{buf}
\end{DoxyParamCaption}
)}\hypertarget{ahci_8c_a19bfae18abb71f9c296ca65f4aea58e0}{}\label{ahci_8c_a19bfae18abb71f9c296ca65f4aea58e0}


Definition at line 384 of file ahci.\+c.


\begin{DoxyCode}
385 \{
386 
387   \hyperlink{ahci_8c_aac2879a211eb0aac18ec6883174c2725}{SATA\_Commander}(port,\hyperlink{ata_8h_a284eeac148ef0c41c5f0ef05dff2b783acc0c859aee63d0012d61b837f297f1f0}{ATA\_CMD\_WRITE\_SECTORS},1,buf,(
      \hyperlink{ahci_8h_ab24077addd3b7b13e086987ff296552c}{WORD})((count-1)>>4) + 1,512,startl,starth,count);
388   \textcolor{comment}{// Check again}
389   \textcolor{keywordflow}{if} (port->is & \hyperlink{ahci_8h_a11add414188662b170c68ead95a786d8}{HBA\_PxIS\_TFES})
390   \{
391       \hyperlink{stdio_8h_a9eff2528601a782ae056c1b1651bb5a8}{printf}(\textcolor{stringliteral}{"Read disk error\(\backslash\)n"});
392       \textcolor{keywordflow}{return} 0;
393   \}
394   \textcolor{keywordflow}{return} 1;
395 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ahci_8c_a19bfae18abb71f9c296ca65f4aea58e0_cgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\index{ahci.\+c@{ahci.\+c}!abar@{abar}}
\index{abar@{abar}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{abar}{abar}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+B\+A\+\_\+\+M\+EM}$\ast$ abar}\hypertarget{ahci_8c_a74f463c1e759d7aac350a6629350991c}{}\label{ahci_8c_a74f463c1e759d7aac350a6629350991c}


Definition at line 88 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!A\+H\+CI@{A\+H\+CI}}
\index{A\+H\+CI@{A\+H\+CI}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{A\+H\+CI}{AHCI}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} A\+H\+CI}\hypertarget{ahci_8c_a22895a1f290ae5acc854595da81a7128}{}\label{ahci_8c_a22895a1f290ae5acc854595da81a7128}


Definition at line 89 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!ahci\+\_\+found@{ahci\+\_\+found}}
\index{ahci\+\_\+found@{ahci\+\_\+found}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{ahci\+\_\+found}{ahci_found}}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t ahci\+\_\+found =0}\hypertarget{ahci_8c_a3af2180010826f632153d8428bac73f8}{}\label{ahci_8c_a3af2180010826f632153d8428bac73f8}


Definition at line 104 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!bus@{bus}}
\index{bus@{bus}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{bus}{bus}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int bus}\hypertarget{ahci_8c_a829d48eff93a24012e522fca8fa6aeea}{}\label{ahci_8c_a829d48eff93a24012e522fca8fa6aeea}


Definition at line 86 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!controllers@{controllers}}
\index{controllers@{controllers}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{controllers}{controllers}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int controllers}\hypertarget{ahci_8c_a3340c0e792ae44d0af90dcad0a47fcf2}{}\label{ahci_8c_a3340c0e792ae44d0af90dcad0a47fcf2}


Definition at line 81 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!data\+\_\+base@{data\+\_\+base}}
\index{data\+\_\+base@{data\+\_\+base}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{data\+\_\+base}{data_base}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t data\+\_\+base =0}\hypertarget{ahci_8c_a8a153376dbea966579104c946bee1494}{}\label{ahci_8c_a8a153376dbea966579104c946bee1494}


Definition at line 106 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!device@{device}}
\index{device@{device}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{device}{device}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int device}\hypertarget{ahci_8c_ac9fe1492f3fc88db647f830b7dad9446}{}\label{ahci_8c_ac9fe1492f3fc88db647f830b7dad9446}


Definition at line 86 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!disks@{disks}}
\index{disks@{disks}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{disks}{disks}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int disks}\hypertarget{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}{}\label{ahci_8c_adcf26084e660ad42b64b9ca175f7871b}


Definition at line 80 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!func@{func}}
\index{func@{func}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{func}{func}}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int func}\hypertarget{ahci_8c_a3b56e67c68d28003939a2da223f12671}{}\label{ahci_8c_a3b56e67c68d28003939a2da223f12671}


Definition at line 86 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!satatest@{satatest}}
\index{satatest@{satatest}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{satatest}{satatest}}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t$\ast$ satatest}\hypertarget{ahci_8c_a0894bd3d5a632c5ce4db717615a138cd}{}\label{ahci_8c_a0894bd3d5a632c5ce4db717615a138cd}


Definition at line 132 of file ahci.\+c.

\index{ahci.\+c@{ahci.\+c}!test1@{test1}}
\index{test1@{test1}!ahci.\+c@{ahci.\+c}}
\subsubsection[{\texorpdfstring{test1}{test1}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ahci\+\_\+t}$\ast$ test1}\hypertarget{ahci_8c_afd17a5aedbd8bd935cad000d4147d6c2}{}\label{ahci_8c_afd17a5aedbd8bd935cad000d4147d6c2}


Definition at line 6 of file ahci.\+c.

